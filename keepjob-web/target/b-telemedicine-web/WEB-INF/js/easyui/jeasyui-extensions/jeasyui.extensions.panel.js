(function(h,j){h.fn.panel.extensions={};var a=function(){h("iframe,frame",this).each(function(){try{if(this.contentWindow&&this.contentWindow.document&&this.contentWindow.close){this.contentWindow.document.write("");this.contentWindow.close()}if(h.isFunction(window.CollectGarbage)){window.CollectGarbage()}}catch(z){}}).remove()};h.fn.panel.defaults.onBeforeDestroy=a;h.fn.window.defaults.onBeforeDestroy=a;h.fn.dialog.defaults.onBeforeDestroy=a;h.fn.datagrid.defaults.onBeforeDestroy=a;h.fn.propertygrid.defaults.onBeforeDestroy=a;h.fn.treegrid.defaults.onBeforeDestroy=a;var l={panel:h.fn.panel.defaults.onResize,window:h.fn.window.defaults.onResize,dialog:h.fn.dialog.defaults.onResize};var f=function(D,L){var C=h(this),E=C.panel("isWindow"),K=C.panel("isDialog"),G=K?"dialog":(E?"window":"panel"),F=l[G];if(h.isFunction(F)){F.apply(this,arguments)}if(!C.panel("inLayout")){var z=C.panel("options"),B=h.isNumeric(z.minWidth)?z.minWidth:o.minHeight,I=h.isNumeric(z.maxWidth)?z.maxWidth:o.maxWidth,J=h.isNumeric(z.minHeight)?z.minHeight:o.minHeight,H=h.isNumeric(z.maxHeight)?z.maxHeight:o.maxHeight;var A=false;if(D>I){D=I;A=true}if(D<B){D=B;A=true}if(L>H){L=H;A=true}if(L<J){L=J;A=true}if(A&&!z.fit){C[G]("resize",{width:D,height:L})}}};var u={panel:h.fn.panel.defaults.onMove,window:h.fn.window.defaults.onMove,dialog:h.fn.dialog.defaults.onMove};var m=function(D,H){var C=h(this),F=C.panel("isWindow"),L=C.panel("isDialog"),G=L?"dialog":(F?"window":"panel"),I=u[G],A=C.panel("options");if(h.isFunction(I)){I.apply(this,arguments)}if(A.maximized){return C[G]("restore")}if(!A.inContainer){return}var z=C.panel("panel"),J=z.parent(),E=J.is("body"),M=h.extend({},E?h.util.windowSize():{width:J.innerWidth(),height:J.innerHeight()}),B=h.isNumeric(A.width)?A.width:z.outerWidth(),K=h.isNumeric(A.height)?A.height:z.outerHeight(),N=false;if(D<0){D=0;N=true}if(H<0){H=0;N=true}if(N){return C[G]("move",{left:D,top:H})}if(D+B>M.width&&D>0){D=M.width-B;N=true}if(H+K>M.height&&H>0){H=M.height-K;N=true}if(N){return C[G]("move",{left:D,top:H})}};var r=function(C){var B=h(C),z=B.panel("body"),A=B.panel("panel");return z.hasClass("layout-body")&&A.hasClass("layout-panel")};var v=function(D){var C=h(D),A=C.panel("panel"),B=A.parent(),z=B.parent();return B.hasClass("tabs-panels")&&z.hasClass("tabs-container")};var y=function(D){var C=h(D),z=C.panel("body"),B=C.panel("panel"),A=B.parent();return(z.hasClass("accordion-body")&&A.hasClass("accordion")&&h.data(A[0],"accordion"))?true:false};var w=function(B){var A=h(B),z=A.panel("body");return z.hasClass("window-body")&&z.parent().hasClass("window")};var i=function(B){var A=h(B),z=A.panel("body");return w(B)&&(z.children("div.panel").children("div.panel-body.dialog-content").length?true:false)};function q(z){z._extensionsPanel={href:z.href,content:z.content};if(z.iniframe){z.href=null;z.content=null}}function e(C){var z=h(C),B=z.panel("options"),A=B._extensionsPanel?B._extensionsPanel:B._extensionsPanel={href:B.href,content:B.content};B.href=A.href;B.content=A.content;if(B.bodyStyle){z.panel("body").css(B.bodyStyle)}if(B.iniframe){g(C)}}var b=h.fn.panel;h.fn.panel=function(z,A){if(typeof z=="string"){return b.apply(this,arguments)}z=z||{};return this.each(function(){var D=h(this),B=h.data(this,"panel")?true:false,C=B?z:h.extend({},h.fn.panel.parseOptions(this),h.parser.parseOptions(this,[{minWidth:"number",maxWidth:"number",minHeight:"number",maxHeight:"number"},{iniframe:"boolean",inContainer:"boolean",keepTitle:"boolean"}]),z);q(C);b.call(D,C);e(this)})};h.union(h.fn.panel,b);function c(C){var z=h(C),B=h.data(C,"panel"),A=B.options;if(A.href){if(!B.isLoaded||!A.cache){var E=h.extend({},A.queryParams);if(A.onBeforeLoad.call(C,E)==false){return}B.isLoaded=false;t(C);if(A.loadingMessage){z.html(h('<div class="panel-loading"></div>').html(A.loadingMessage))}A.loader.call(C,E,function(F){D(A.extractor.call(C,F));A.onLoad.apply(C,arguments);B.isLoaded=true},function(){A.onLoadError.apply(C,arguments)})}}else{if(A.content){if(!B.isLoaded){t(C);D(A.content);B.isLoaded=true}}}function D(F){z.html(F);h.parser.parse(z)}}function t(A){var z=h(A);z.find(".combo-f").each(function(){h(this).combo("destroy")});z.find(".m-btn").each(function(){h(this).menubutton("destroy")});z.find(".s-btn").each(function(){h(this).splitbutton("destroy")});z.find(".tooltip-f").each(function(){h(this).tooltip("destroy")});z.children("div").each(function(){h(this)._fit(false)})}function g(D,z){var C=h.data(D,"panel"),B=C.options;C.isLoaded=false;if(z){if(typeof z=="string"){B.href=z}else{B.queryParams=z}}if(B.iniframe){var A=B._extensionsPanel?B._extensionsPanel:B._extensionsPanel={href:B.href,content:B.content};A.href=B.href;A.content=B.content;B.href=null;B.content='<iframe class="panel-iframe" frameborder="0" width="100%" height="100%" marginwidth="0px" marginheight="0px" scrolling="auto"></iframe>';c(D);B.href=A.href;B.content=A.content;k(D).bind({load:function(){if(h.isFunction(B.onLoad)){B.onLoad.apply(D,arguments)}},error:function(){if(h.isFunction(B.onLoadError)){B.onLoadError.apply(D,arguments)}}}).attr("src",B.href||"")}else{c(D)}}function k(B){var A=h(B),z=A.panel("body");return z.children("iframe.panel-iframe")}var d=h.fn.panel.methods.header;function s(D){var C=h(D);if(!v(D)){return d.call(C,C)}var z=C.panel("panel"),A=z.index(),B=z.closest(".tabs-container");return B.find(">div.tabs-header>div.tabs-wrap>ul.tabs>li").eq(A)}var p=h.fn.panel.methods.setTitle;function n(B,C){var z=h(B);if(!v(B)){return p.call(z,z,C)}if(!C){return}var A=z.panel("options"),D=z.panel("header");A.title=C;D.find(">a.tabs-inner>span.tabs-title").text(C)}var x=h.fn.panel.extensions.methods={inLayout:function(z){return r(z[0])},inTabs:function(z){return v(z[0])},inAccordion:function(z){return y(z[0])},isWindow:function(z){return w(z[0])},isDialog:function(z){return i(z[0])},iframe:function(z){return k(z[0])},refresh:function(A,z){return A.each(function(){g(this,z)})},header:function(z){return s(z[0])},setTitle:function(A,z){return A.each(function(){n(this,z)})}};var o=h.fn.panel.extensions.defaults={iniframe:false,minWidth:10,maxWidth:10000,minHeight:10,maxHeight:10000,onResize:f,inContainer:true,bodyStyle:null,onMove:m};h.extend(h.fn.panel.defaults,o);h.extend(h.fn.panel.methods,x)})(jQuery);