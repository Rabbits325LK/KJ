(function(w,n){function h(T){var V=w(T).addClass("ueditor-f"),W=/^(?:div)$/i.test(T.nodeName),R=/^(?:textarea)$/i.test(T.nodeName),S=R?(V.val()||V.text()):V.html(),O=w.data(T,"ueditor"),N=O.options,P=V.attr("name"),Q=O.editorId="ueditor_"+w.util.guid("N"),M=O.panel=W?V.addClass("ueditor-panel").empty():w('<div class="ueditor-panel"></div>').insertAfter(V.hide().empty()).append(V),U=O.textarea=w('<textarea id="'+Q+'"'+(P?' name="'+P+'"':"")+"></textarea>").appendTo(M);if(P){V.attr("ueditorName",P).removeAttr("name")}if(S){U.val(S)}if(N.value){N.initialContent=String(N.value)}N.originalValue=S||N.initialContent;if(N.template){N.toolbars=N.toolbarsTemplate[N.template]}O.panel.panel(w.extend({},N,{noheader:true,onDestroy:w.fn.panel.defaults.onDestroy,onResize:function(Y,X){w.fn.panel.defaults.onResize.apply(this,arguments);w.extend(N,{width:Y,height:X});j(T);if(w.isFunction(N.onResize)){N.onResize.apply(T,arguments)}}}));O.wrapper=O.panel.panel("body").addClass("ueditor-wrapper");O.editor=UE.getEditor(Q,N);p(T);F(T);D(T)}function p(O){var N=w.data(O,"ueditor"),M=N.options;w.each(w.fn.ueditor.events,function(Q,S){var P="on"+S,R=M[P];N.editor.addListener(S,function(){if(S=="contentChange"){var V=M.value=w(O).ueditor("getValue");N.textarea.val(V)}if(S=="setHeight"){var U=w(N.editor.body),T=U.parent().height();U.height(T)}if(w.isFunction(R)){return R.apply(O,arguments)}})})}function F(Q){var P=w.data(Q,"ueditor"),O=P.options,M=20;N();function N(){P.edui=P.textarea.prev();P.eduieditor=P.edui.find(">div.edui-editor");P.toolbarbox=P.eduieditor.find(">div.edui-editor-toolbarbox");P.iframeholder=P.eduieditor.find(">div.edui-editor-iframeholder");P.bottomContainer=P.eduieditor.find(">div.edui-editor-bottomContainer");P.scalelayer=P.eduieditor.find(">div[id$=scalelayer]");if(P.editor.iframe&&P.editor.iframe.parentNode&&P.editor.iframe.parentNode.style&&P.editor.body){j(Q);b(Q,O.disabled)}else{if(--M){w.util.exec(N,100)}}}}function I(O){var N=w.data(O,"ueditor"),M=N.panel.panel("options");return w.extend(N.options,{title:M.title,iconCls:M.iconCls,width:M.width,height:M.height,left:M.left,top:M.top,cls:M.cls,headerCls:M.headerCls,bodyCls:M.bodyCls,style:M.style,fit:M.fit,border:M.border,doSize:M.doSize,noheader:M.noheader,collapsible:M.collapsible,minimizable:M.minimizable,maximizable:M.maximizable,closable:M.closable,collapsed:M.collapsed,minimized:M.minimized,maximized:M.maximized,closed:M.closed})}function j(R){var O=w(R),Q=w.data(R,"ueditor");if(Q&&Q.toolbarbox&&Q.bottomContainer&&Q.scalelayer&&Q.iframeholder&&Q.eduieditor&&Q.editor){var P=Q.options,N=O._fit(),S=N.width-(P.border?0:2);Q.iframeholder.width(S);Q.eduieditor.width(S);var M=N.height-Q.toolbarbox.height()-Q.bottomContainer.height()-Q.scalelayer.height()-(P.border?0:2);Q.editor.setHeight(M)}}function o(N,O){var M=w.data(N,"ueditor");M.panel.panel("resize",O)}function b(Q,N,M){var P=w.data(Q,"ueditor"),O=P.options,R=N?true:false;O.disabled=R;return P.editor[R?"setDisabled":"setEnabled"](M)}function z(O){var N=w.data(O,"ueditor"),M=N.options;M.isShow=true;N.panel.panel("open");N.editor.setShow();return I(O)}function J(O){var N=w.data(O,"ueditor"),M=N.options;M.isShow=false;N.editor.setHide();N.panel.panel("close");return I(O)}function H(O){var M=w(O),N=w.data(O,"ueditor");if(N){if(N.editor){if(N.editor.fontset){N.editor.fontset.dialog("destroy")}N.editor.destroy()}if(N.panel){N.panel.panel("destroy")}}M.remove()}function k(N,O){var M=w.data(N,"ueditor");if(O){return M.editor.sync()}else{return M.editor.sync(O)}}function f(N,O){var M=w.data(N,"ueditor");return M.editor.addshortcutkey(O)}function A(O,N){var M=w.data(O,"ueditor");if(typeof N=="boolean"){return M.editor.focus(N)}else{return M.editor.focus()}}function a(O,M){var N=w.data(O,"ueditor");return N.editor.execCommand(M)}function d(O,M){var N=w.data(O,"ueditor");return N.editor.queryCommandState(M)}function K(O,M){var N=w.data(O,"ueditor");return N.editor.queryCommandValue(M)}function G(O,M){var N=w.data(O,"ueditor");if(M){var P=w.util.likeArrayNotString(M)?M:[];return N.editor.hasContents(P)}else{return N.editor.hasContents()}}function E(O){var N=w.data(O,"ueditor"),M=N.options;y(O,M.originalValue);return N.editor.reset()}function v(O,N){var M=w.data(O,"ueditor");return M.editor.getLang(N)}function c(O,M){var N=w.data(O,"ueditor");if(typeof M=="boolean"){return N.editor.getContentLength(M)}else{return N.editor.getContentLength()}}function e(O,N){var M=w.data(O,"ueditor");return M.editor.addInputRule(N)}function u(O,N){var M=w.data(O,"ueditor");return M.editor.addOutputRule(N)}function C(O,P){var N=w.data(O,"ueditor"),M=N.options;return w(O).ueditor(M.valueMethod,P)}function x(O,M){var N=w.data(O,"ueditor");return w.isFunction(M)?N.editor.getContent(M):N.editor.getContent()}function l(N){var M=w.data(N,"ueditor");return M.editor.getAllHtml()}function m(N){var M=w.data(N,"ueditor");return M.editor.getPlainTxt()}function L(N){var M=w.data(N,"ueditor");return M.editor.getContentTxt()}function y(P,O,M){var N=w.data(P,"ueditor");if(M){return N.editor.setContent(O,true)}else{return N.editor.setContent(O)}}function g(N,O){var M=w.data(N,"ueditor");O=O||"";if(typeof O=="string"){return M.editor.setContent(O)}else{return M.editor.setContent(O.value,O.isAppendTo)}}function B(N){var M=w.data(N,"ueditor");M.editor.execCommand("cleardoc")}function q(N){var M=w.data(N,"ueditor");M.tip=false;M.wrapper.tooltip("hide")}function i(O){var N=w.data(O,"ueditor"),M=N.options;N.wrapper.tooltip(w.extend({},M.tipOptions,{content:M.missingMessage,position:M.tipPosition,deltaX:M.deltaX})).tooltip("show");N.tip=true}function t(N){var M=w.data(N,"ueditor");if(M&&M.tip){M.wrapper.tooltip("reposition")}}function s(P){var M=w(P),O=w.data(P,"ueditor"),N=O.options;O.wrapper.unbind(".ueditor");if(N.novalidate){return}O.wrapper.bind("focus.ueditor",function(){O.validating=true;O.value=n;(function(){if(O.validating){var Q=M.ueditor("getContentTxt");if(O.value!=Q){O.value=Q;if(O.timer){clearTimeout(O.timer)}O.timer=setTimeout(function(){M.ueditor("validate")},N.delay)}else{t(P)}setTimeout(arguments.callee,200)}})()}).bind("blur.ueditor",function(){if(O.timer){clearTimeout(O.timer);O.timer=n}O.validating=false;q(P)}).bind("mouseenter.ueditor",function(){if(O.wrapper.hasClass("ueditor-invalid")){i(P)}}).bind("mouseleave.ueditor",function(){if(!O.validating){q(P)}})}function r(Q){var M=w(Q),P=w.data(Q,"ueditor"),N=P.options,O=C(Q);P.wrapper.removeClass("ueditor-invalid");q(Q);if(!N.novalidate&&N.required&&w.string.isNullOrWhiteSpace(O)&&!M.is(":disabled")&&!P.wrapper.hasClass("ueditor-disabled")){P.wrapper.addClass("ueditor-invalid");if(P.validating){i(Q)}return false}return true}function D(P,M){var O=w.data(P,"ueditor"),N=O.options;if(M!=n&&M!=null){N.novalidate=M}if(N.novalidate){O.wrapper.find("div.edui-editor").removeClass("ueditor-invalid");q(P)}s(P)}w.fn.ueditor=function(M,N){if(typeof M=="string"){return w.fn.ueditor.methods[M](this,N)}M=M||{};return this.each(function(){var O=w.data(this,"ueditor");if(O){w.extend(O.options,M)}else{w.data(this,"ueditor",{options:w.extend({},w.fn.ueditor.defaults,w.fn.ueditor.parseOptions(this),M)});h(this)}})};w.fn.ueditor.events=["ready","destroy","reset","focus","langReady","beforeExecCommand","afterExecCommand","firstBeforeExecCommand","beforeGetContent","afterGetContent","getAllHtml","beforeSetContent","afterSetContent","selectionchange","beforeSelectionChange","afterSelectionChange","contentChange","setHeight"];w.fn.ueditor.toolbars=window.UEDITOR_CONFIG.toolbars;w.fn.ueditor.parseOptions=function(M){return w.extend({},w.parser.parseOptions(M,["lang","theme","charset","initialContent","textarea","wordCountMsg","tabNode","sourceEditor","value","templet","valueMethod","missingMessage","tipPosition",{enableAutoSave:"boolean",isShow:"boolean",focus:"boolean",fullscreen:"boolean",readonly:"boolean",imagePopup:"boolean",emotionLocalization:"boolean",pasteplain:"boolean",wordCount:"boolean",elementPathEnabled:"boolean",autoHeightEnabled:"boolean",scaleEnabled:"boolean",tableDragable:"boolean",sourceEditorFirst:"boolean",fit:"boolean",disabled:"boolean",border:"boolean",required:"boolean",novalidate:"boolean",autosave:"boolean"},{saveInterval:"number",zIndex:"number",maximumWords:"number",tabSize:"number",width:"number",height:"number",deltaX:"number"}]))};w.fn.ueditor.buttons={defaults:{name:null,label:null,iconCss:"background-position: 0 0;",execCommand:function(M){},queryCommandState:function(){},queryCommandValue:function(){},onInit:function(M){}},list:[],styleTagID:"ueditorCss_"+w.util.guid("N"),append:function(P,S){var N=w.extend({},w.fn.ueditor.buttons.defaults,P),M=baidu.editor.ui,O=N.name;UEDITOR_CONFIG.toolbars[0].push(N.name);for(var R in N.label){UE.I18N[R].labelMap[N.name]=N.label[R]}M[O]=function(U){return function(V){var W=new M.Button({className:"edui-for-"+U,title:V.options.labelMap[U]||V.getLang("labelMap."+U)||"",onclick:function(){V.execCommand(U)},theme:V.options.theme,showText:false});M.buttons[U]=W;V.addListener("selectionchange",function(Y,X,aa){var Z=V.queryCommandState(U);if(Z==-1){W.setDisabled(true);W.setChecked(false)}else{if(!aa){W.setDisabled(false);W.setChecked(Z)}}});if(w.isFunction(N.onInit)){w.util.exec(function(){N.onInit.call(W,V)})}return W}}(O);UE.commands[N.name]=w.extend({},N);var T=" .edui-for-"+N.name+" .edui-icon {"+(N.iconCss?N.iconCss:"")+"}",Q=w("#"+w.fn.ueditor.buttons.styleTagID);if(Q.length){T=(Q.text()||Q.html())+"\n"+T;if(w.util.browser.msie&&w.util.browser.version<9){Q.remove();w.util.addCss(T).attr("id",w.fn.ueditor.buttons.styleTagID)}else{Q.text(T)}}else{w.util.addCss(T).attr("id",w.fn.ueditor.buttons.styleTagID)}if(!S){w.fn.ueditor.buttons.list.push(N)}}};w.each(w.fn.ueditor.buttons.list,function(N,M){w.fn.ueditor.buttons.append(M,true)});w.fn.ueditor.buttons.refreshFontSet={name:"fontset",iconCss:"background-position: -720px 0;",label:{"zh-cn":"字体设置"},execCommand:function(Q){var O=this,R=w(O.container).offset(),P=O.fontset?O.fontset:O.fontset=M(),N=P.dialog("options");N.closed?P.dialog("open").dialog("move",{top:R.top-50,left:R.left}):P.dialog("close");function M(){var S=w.easyui.showDialog({noheader:true,modal:false,resizable:false,draggable:false,closed:true,autoDestroy:false,border:false,topMost:false,width:260,height:50,top:R.top-50,left:R.left,enableSaveButton:false,enableCloseButton:false,enableApplyButton:false,onOpen:function(){w.fn.ueditor.buttons.refreshFontSet.refresh(O)},content:'<div class="ueditor-fontset-container"></div>'});w.util.exec(function(){var Y=S.find(".ueditor-fontset-container"),U=UE.I18N[O.ui.lang],T=[],X=[];for(var W in U.fontfamily){T.push({value:U.fontfamily[W],text:U.fontfamily[W]})}for(var V=0;V<O.ui.fontsize.length;V++){X.push({value:O.ui.fontsize[V]+"px",text:O.ui.fontsize[V]+"px"})}S.fontfamily=w('<input class="ueditor-fontset-fontfamily" type="text" />').appendTo(Y).combobox({width:70,panelWidth:120,editable:false,data:T,formatter:function(Z){return'<span style="font-family: '+Z.text+';">'+Z.text+"</span>"},onSelect:function(Z){O.execCommand("fontfamily",Z.text)},onShowPanel:function(){S.fontsize.combobox("hidePanel")}});S.fontsize=w('<input class="ueditor-fontset-fontsize" type="text" />').appendTo(Y).combobox({width:70,panelWidth:120,editable:false,data:X,formatter:function(Z){return'<span style="font-size: '+Z.text+';">'+Z.text+"</span>"},onSelect:function(Z){O.execCommand("fontsize",Z.text)},onShowPanel:function(){S.fontfamily.combobox("hidePanel")}});S.bold=w("<a></a>").appendTo(Y).linkbutton({plain:true,toggle:true,iconCls:"icon-standard-text-bold",onClick:function(){O.execCommand("bold")}});S.italic=w("<a></a>").appendTo(Y).linkbutton({plain:true,toggle:true,iconCls:"icon-standard-text-italic",onClick:function(){O.execCommand("italic")}});S.underline=w("<a></a>").appendTo(Y).linkbutton({plain:true,toggle:true,iconCls:"icon-standard-text-underline",onClick:function(){O.execCommand("underline")}});O.addListener("focus",function(){Y.find(".combobox-f").combobox("hidePanel")})});return S}},queryCommandState:function(){var M=this;w.fn.ueditor.buttons.refreshFontSet.refresh(M);return M.fontset?(M.fontset.dialog("options").closed?0:1):0},refresh:function(Q){var O=Q.queryCommandValue("fontfamily"),S=Q.queryCommandValue("fontsize"),T=Q.queryCommandState("bold"),P=Q.queryCommandState("italic"),M=Q.queryCommandState("underline");if(Q.fontset&&!Q.fontset.dialog("options").closed){if(Q.fontset.fontfamily&&O){var N=Q.fontset.fontfamily.combobox("getData"),R=O.split(","),U=false;w.each(R,function(V,W){if(U){return}W=w.trim(W);if(w.array.contains(N,W,function(X){return X.value==W})){Q.fontset.fontfamily.combobox("setValue",W);U=true}});if(!U){Q.fontset.fontfamily.combobox("setValue","arial")}}if(Q.fontset.fontsize){Q.fontset.fontsize.combobox("setValue",S)}if(Q.fontset.bold){Q.fontset.bold.linkbutton(T==1?"select":"unselect")}if(Q.fontset.italic){Q.fontset.italic.linkbutton(P==1?"select":"unselect")}if(Q.fontset.underline){Q.fontset.underline.linkbutton(M==1?"select":"unselect")}}}};w.fn.ueditor.buttons.append(w.fn.ueditor.buttons.refreshFontSet);w.easyui.showUeditorDialog=function(M){if(M&&M.topMost&&w!=w.util.$&&w.util.$.easyui.showUeditorDialog){return w.util.$.easyui.showUeditorDialog.apply(this,M)}var P=w.extend({},w.easyui.showUeditorDialog.defaults,M||{}),O,N,Q=P.value,R=w.easyui.showDialog(w.extend({},P,{content:'<div class="ueditor-dialog-container"></div>',enableApplyButton:false,topMost:false,onDestroy:function(){if(O){O.ueditor("destroy")}},onResize:function(){var S=w.fn.dialog.defaults.onResize.apply(this,arguments);if(w.isFunction(P.onResize)){P.onResize.apply(this,arguments)}return S},onSave:function(){return P.onEnter.call(R,Q,O,N,this)},onClose:function(){if(N&&N.fontset){N.fontset.dialog("close")}return P.onCancel.call(R,Q,O,N,this)},onMove:function(){var S=w.fn.dialog.defaults.onMove.apply(this,arguments);if(N&&N.fontset&&!N.fontset.dialog("options").closed){var T=w(N.container).offset();N.fontset.dialog("open").dialog("move",{top:T.top-50,left:T.left})}return S},onBeforeDestroy:function(){if(N&&N.fontset){N.fontset.dialog("destroy")}}}));w.util.exec(function(){var S=R.find(".ueditor-dialog-container").ueditor(w.extend({},P,{fit:true,border:false,value:Q,autosave:false,enableAutoSave:false,onResize:w.fn.ueditor.defaults.onResize,oncontentChange:function(){Q=w(this).ueditor("options").value;if(w.isFunction(P.oncontentChange)){P.oncontentChange.apply(this,arguments)}}}));R.ueditor=O=S;R.editor=N=S.ueditor("editor")});return R};w.easyui.showUeditorDialog.defaults={title:"Html 编辑器窗口",iconCls:"icon-standard-application-form-edit",width:665,height:480,minWidth:400,minHeight:240,maximizable:true,collapsible:true,value:null,zIndex:20000,focus:true,template:"normal",onEnter:function(O,N,M){},onCancel:function(O,N,M){}};w.fn.ueditor.methods={options:function(M){return I(M[0])},panel:function(M){return w.data(M[0],"ueditor").panel},editor:function(M){return w.data(M[0],"ueditor").editor},textarea:function(M){return w.data(M[0],"ueditor").textarea},resize:function(N,M){return N.each(function(){o(this,M)})},destroy:function(M){return M.each(function(){H(this)})},sync:function(N,M){return N.each(function(){k(this,M)})},addshortcutkey:function(N,M){return N.each(function(){return N.each(function(){f(this,M)})})},getContent:function(N,M){return x(N[0],M)},getAllHtml:function(M){return l(M[0])},getPlainTxt:function(M){return m(M[0])},getContentTxt:function(M){return L(M[0])},setContent:function(N,M){return N.each(function(){g(this,M)})},focus:function(N,M){return N.each(function(){A(this,M)})},execCommand:function(N,M){return a(N[0],M)},queryCommandState:function(N,M){return d(N[0],M)},queryCommandValue:function(N,M){return K(N[0],M)},hasContents:function(N,M){return G(N[0],M)},reset:function(M){return M.each(function(){E(this)})},setEnabled:function(N,M){return N.each(function(){b(this,false,M)})},setDisabled:function(N,M){return N.each(function(){b(this,true,M)})},setShow:function(M){return M.each(function(){z(this)})},setHide:function(M){return M.each(function(){J(this)})},getLang:function(N,M){return v(N[0],M)},getContentLength:function(N,M){return c(N[0],M)},addInputRule:function(N,M){return N.each(function(){e(this,M)})},addOutputRule:function(N,M){return N.each(function(){u(this,M)})},show:function(M){return M.each(function(){z(this)})},hide:function(M){return M.each(function(){J(this)})},enable:function(N,M){return N.each(function(){b(this,false,M)})},disable:function(N,M){return N.each(function(){b(this,true,M)})},getValue:function(N,M){return C(N[0],M)},setValue:function(N,M){return N.each(function(){y(this,M)})},append:function(N,M){return N.each(function(){y(this,M,true)})},setFocus:function(N,M){return N.each(function(){A(this,M)})},clear:function(M){return M.each(function(){B(this)})},validate:function(M){return M.each(function(){r(this)})},isValid:function(M){return r(M[0])},enableValidation:function(M){return M.each(function(){D(this,false)})},disableValidation:function(M){return M.each(function(){D(this,true)})}};w.fn.ueditor.defaults={toolbars:w.fn.ueditor.toolbars,lang:"zh-cn",enableAutoSave:true,saveInterval:500,theme:"default",charset:"utf-8",isShow:true,initialContent:"",textarea:"editorValue",focus:false,fullscreen:false,readonly:false,zIndex:900,imagePopup:true,emotionLocalization:false,pasteplain:false,fontsize:[10,11,12,14,16,18,20,24,36],paragraph:{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""},rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"],lineheight:["1","1.5","1.75","2","3","4","5"],shortcutMenu:["fontfamily","fontsize","bold","italic","underline","forecolor","backcolor","insertorderedlist","insertunorderedlist"],wordCount:true,maximumWords:10000,wordCountMsg:"当前已输入 {#count} 个字符，您还可以输入{#leave} 个字符",tabSize:4,tabNode:"&nbsp;",elementPathEnabled:true,autoHeightEnabled:true,scaleEnabled:false,tableDragable:true,sourceEditor:"codemirror",sourceEditorFirst:false,enableContextMenu:true,disablePInList:false,retainOnlyLabelPasted:false,autosave:true,onready:function(){},ondestroy:function(){},onreset:function(){},onfocus:function(){},onlangReady:function(){},onbeforeExecCommand:function(){},onafterExecCommand:function(){},onfirstBeforeExecCommand:function(){},onbeforeGetContent:function(){},onafterGetContent:function(){},ongetAllHtml:function(){},onbeforeSetContent:function(){},onafterSetContent:function(){},onselectionchange:function(){},onbeforeSelectionChange:function(){},onafterSelectionChange:function(){},oncontentChange:function(){},onsetHeight:function(){}};w.extend(w.fn.ueditor.defaults,{fit:false,border:true,width:600,height:150,value:null,toolbarsTemplate:{simple:[["fontset","|","forecolor","backcolor","|","emotion","scrawl","|","snapscreen","insertimage","attachment","|","source"]],normal:[["bold","italic","underline","|","fontfamily","fontsize","forecolor","backcolor","|","justifyleft","justifycenter","justifyright","justifyjustify","|","insertorderedlist","insertunorderedlist","|","indent","blockquote","link","formatmatch","|","source"]],rich:[[]],full:w.fn.ueditor.toolbars},template:"normal",valueMethod:"getContent",disabled:false,codeMirrorJsUrl:n,codeMirrorCssUrl:n,autoHeightEnabled:false,scaleEnabled:false,required:false,missingMessage:"该编辑框不能为空.",tipPosition:"right",deltaX:0,tipOptions:w.fn.validatebox.defaults.tipOptions,novalidate:false,onResize:function(N,M){}});w.parser.plugins.push("ueditor");if(w.fn.form&&w.isArray(w.fn.form.otherList)){w.fn.form.otherList.push("ueditor")}})(jQuery);