(function(c,d){function b(h){var g=c.data(h,"comboicons"),f=g.options,e=c(h).addClass("comboicons-f").combo(c.extend({},f,{onShowPanel:function(){e.combo("panel").hide();g.dialog=c.easyui.icons.showSelector({width:f.panelWidth,height:f.panelHeight,size:f.size,selected:e.combo(f.multiple?"getValues":"getValue"),multiple:f.multiple,buttons:[{index:101.5,text:"清除",iconCls:"icon-standard-cancel",handler:function(l){e.combo("clear");l.close()}}],onEnter:function(n){if(n){var l=c.isArray(n),m=l?n.join(", "):n;e.combo(l?"setValues":"setValue",n).combo("setText",m)}else{e.combo("clear")}},onClose:function(){var l=c.data(h,"combo");if(l&&l.options){e.combo("hidePanel")}}});var i=g.dialog.dialog("options");if((!c.util.isUtilTop&&!i.topMost)||c.util.isUtilTop){var j=e.combo("textbox"),k=j.offset();g.dialog.dialog("move",c.extend(k,{top:k.top+j.outerHeight()+2}))}if(c.isFunction(f.onShowPanel)){f.onShowPanel.apply(this,arguments)}},onHidePanel:function(){if(g.dialog){var j=g.dialog,i=j.dialog("options");g.dialog=null;if(!i.closed){j.dialog("close")}}if(c.isFunction(f.onHidePanel)){f.onHidePanel.apply(this,arguments)}},onDestroy:function(){if(g.dialog){g.dialog.dialog("destroy");g.dialog=null}if(c.isFunction(f.onDestroy)){f.onDestroy.apply(this,arguments)}},onChange:function(j,i){if(c.isFunction(f.onChange)){f.onChange.apply(this,arguments)}}}));f.originalValue=f.value;if(f.value){a(h,c.util.likeArrayNotString(f.value)?f.value:[f.value])}e.combo("validate")}function a(h,e){var f=c(h),g=f.comboicons("options"),j=c.util.likeArrayNotString(e)?e:[e],i=j.join(g.separator);f.combo("setValues",j).combo("setText",i)}c.fn.comboicons=function(e,f){if(typeof e=="string"){var g=c.fn.comboicons.methods[e];if(g){return g(this,f)}else{return this.combo(e,f)}}e=e||{};return this.each(function(){var h=c.data(this,"comboicons");if(h){c.extend(h.options,e)}else{c.data(this,"comboicons",{options:c.extend({},c.fn.comboicons.defaults,c.fn.comboicons.parseOptions(this),e)});b(this)}})};c.fn.comboicons.parseOptions=function(e){return c.extend({},c.fn.combo.parseOptions(e),c.parser.parseOptions(e,["size","iconCls"]))};c.fn.comboicons.methods={options:function(g){var f=g.combo("options"),e=c.data(g[0],"comboicons").options;return c.extend(e,{originalValue:f.originalValue,disabled:f.disabled,readonly:f.readonly})},setValues:function(f,e){return f.each(function(){a(this,e)})},setValue:function(f,e){return f.each(function(){a(this,[e])})}};c.fn.comboicons.defaults=c.extend({},c.fn.combo.defaults,{size:"16",iconCls:"icon-hamburg-zoom",panelWidth:500,panelHeight:360,autoShowPanel:false,editable:false});if(c.fn.datagrid){c.extend(c.fn.datagrid.defaults.editors,{comboicons:{init:function(e,f){var g=c('<input type="text"></input>').appendTo(e).comboicons(f);g.comboicons("textbox").addClass("datagrid-editable-input");return g},destroy:function(e){c(e).comboicons("destroy")},getValue:function(g){var e=c(g),f=e.comboicons("options");return e.comboicons(f.multiple?"getValues":"getValue")},setValue:function(h,g){var e=c(h),f=e.comboicons("options");if(g){if(f.multiple){if(c.util.likeArrayNotString(g)){e.comboicons("setValues",g)}else{if(typeof g=="string"){e.comboicons("setValues",g.split(f.separator))}else{e.comboicons("setValue",g)}}}else{e.comboicons("setValue",g)}}else{e.comboicons("clear")}},resize:function(f,e){c(f).comboicons("resize",e)},setFocus:function(e){c(e).comboicons("textbox").focus()}}})}c.parser.plugins.push("comboicons");if(c.fn.form&&c.isArray(c.fn.form.comboList)){c.fn.form.comboList.push("comboicons")}})(jQuery);