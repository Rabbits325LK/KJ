(function(a,b){a.util.namespace("$.easyui.icons");a.easyui.icons.showSelector=function(c){if(c&&c.topMost&&a!=a.util.$){return a.util.$.easyui.icons.showSelector.apply(this,arguments)}var d=a.extend({width:580,minWidth:520,height:480,minHeight:360,title:"选择图标",iconCls:"icon-hamburg-zoom",maximizable:true,collapsible:true,selected:null,multiple:false,size:null,onEnter:function(g){}},c);d.size=d.size||"16";d.title=d.title+", "+(d.multiple?"多选":"单选")+", 尺寸:"+d.size;var e=d.selected,f=a.easyui.showDialog(a.extend({},d,{content:'<div class="icons-layout"><div data-options="region: \'north\', split: false, border: false" style="height: 31px; overflow: hidden;"><div class="icons-toolbar"></div></div><div data-options="region: \'center\', border: false"><div class="icons-tabs"></div></div></div>',saveButtonText:"确定",saveButtonIconCls:"icon-ok",enableApplyButton:false,onSave:function(){if(a.isFunction(d.onEnter)){return d.onEnter.call(this,e)}}}));a.util.exec(function(){var l=f.find("div.icons-layout").layout({fit:true}),o=l.find("div.icons-toolbar").toolbar(),n=l.find("div.icons-tabs").tabs({fit:true,border:false}),g=n.tabs("options"),m=g.onSelect,p=a.array.filter(a.easyui.iconStyles,function(r){return r.size.indexOf(d.size)>-1}).sort(function(s,r){return s.sort-r.sort}),q,i=function(r){if(q){q.removeClass("selected")}q=a(this);q.addClass("selected");e=q.attr("title");h()},k=function(t){var r=a(this),s=r.attr("title");if(!e){e=[]}if(!a.isArray(e)){e=[e]}a.array[r.hasClass("selected")?"remove":"attach"](e,s);r.toggleClass("selected");h()};f.setValue=function(r){e=r;h();j()};f.getValue=function(){return e};g.onSelect=function(w,r){if(a.isFunction(m)){m.apply(this,arguments)}var v=n.tabs("getTab",r),x=v.panel("options"),u=x.id;if(v.find("ul.icon-selector-ul").length){return}var t=a.array.filter(a.easyui.icons[u],d.size=="32"?function(y){return y.iconCls.indexOf("32")>-1}:function(y){return y.iconCls.indexOf("32")==-1});var s=a("<ul class='icon-selector-ul'></ul>").appendTo(v);a.each(t,function(){var y=a("<li></li>").attr("title",this.iconCls).appendTo(s).click(d.multiple?k:i);a("<span>&nbsp;</span>").addClass(this.iconCls).appendTo(y)});if(d.size=="32"){s.addClass("icon-selector-ul-32")}};a.util.exec(function(){f.setValue(e)});a.each(p,function(r,s){n.tabs("add",{id:s.style,title:s.name,iconCls:"",closable:false,selected:false,refreshable:false})});if(a.easyui.iconStyles.length){n.tabs("select",0)}function h(){o.toolbar("clear");if(e){if(a.isArray(e)){var t=e.join("\n"),s=a("<span>，详情</span>").css({color:"Blue"}).attr("title",t),r=a("<div>清除选择</div>").css({color:"Blue",cursor:"pointer",width:100,textAlign:"right"}).attr("title","清除所有选择的项").click(function(){n.find("ul>li.selected").removeClass("selected");f.setValue(null)});o.toolbar("appendItem",["当前共选中的图标数量为：",e.length,s,r])}else{o.toolbar("appendItem",["当前选中的图标值为：",{type:"button",options:{iconCls:e,plain:true}},e])}}else{o.toolbar("appendItem","当前没有选中图标")}}function j(){var r=f.dialog("body").find("ul.icon-selector-ul li").removeClass("selected");if(a.isArray(e)){a.each(e,function(s,t){if(t){r.find("span."+t).parent().addClass("selected")}})}else{if(e){q=r.find("span."+e).parent().addClass("selected")}}}});return f}})(jQuery);