(function(n,o){function f(M){var H=n(M),I=/^(?:div)$/i.test(M.nodeName),N=H.children(),K=I?H:n("<div></div>").insertAfter(H).append(H);if(!I){K.attr({"class":H.attr("class"),style:H.attr("style")}).removeClass("easyui-toolbar");H.children().each(function(){K.append(this)});H.hide()}var L=n.data(M,"toolbar"),J=L.options;L.toolbar=K.addClass("dialog-toolbar toolbar");H.addClass("toolbar-f");L.wrapper=n("<table class='toolbar-wrapper' cellspacing='0' cellpadding='0' ></table>").appendTo(K);m(M,N);z(M,{width:J.width,height:J.height});K.bind("_resize",function(){z(M)})}function z(M,I){var H=n(M),L=n.data(M,"toolbar"),K=L.toolbar,J=L.options;I=n.extend({width:J.width,height:J.height},I||{});K.css({width:I.width,height:I.height});n.extend(J,I);n.util.exec(function(){k(M,J.align);D(M,J.valign)});J.onResize.call(M,n.isNumeric(I.width)?I.width:K.width(),n.isNumeric(I.height)?I.height:K.height())}function k(L,N){N=String(N);if(!n.array.contains(["left","center","right"],N.toLowerCase())){return}var H=n(L),J=n.data(L,"toolbar"),M=J.wrapper,I=J.options,K=0;I.align=N;M.removeClass("toolbar-align-left toolbar-align-center toolbar-align-right").addClass("toolbar-align-"+N)}function D(K,N){N=String(N);if(!n.array.contains(["top","middle","bottom"],N.toLowerCase())){return}var Q=n(K),J=n.data(K,"toolbar"),M=J.toolbar,I=J.wrapper,H=J.options,O=M.height(),P=I.height(),L;H.valign=N;I.removeClass("toolbar-valign-top toolbar-valign-middle toolbar-valign-bottom").addClass("toolbar-valign-"+N);switch(N){case"top":L=0;break;case"middle":L=(O-P)/2;break;case"bottom":L=(O-P);break}I.css("top",Math.max(L,0))}function j(M,J,Q){var I=n.data(M,"toolbar"),H=I.options;if(n.util.isDOM(Q)){var N=n(Q).addClass("toolbar-item").appendTo(J),O=N.text();if(/^(?:div|span)$/i.test(N[0].nodeName)&&n.array.contains(["-","—","|"],O)){N.addClass("dialog-tool-separator").empty();n.data(N[0],"toolbar-item-data",{actions:H.itemOptions.separator,target:N,options:{},type:"separator",container:J})}else{n.data(N[0],"toolbar-item-data",{actions:null,target:N,options:null,type:"custom",container:J})}}else{if(n.array.contains(["string","number","date"],n.type(Q))){Q=n.string.trim(Q);if(n.array.contains(["-","—","|"],Q)){j(M,J,{type:"separator"})}else{if(n.string.isHtmlText(Q)){n(Q).each(function(){j(M,J,this)})}else{j(M,J,{type:"label",options:{text:Q}})}}}else{var P=n.extend({},H.itemOptions,Q||{}),L=H.itemTypes[P.type];if(!L||!L.init){return}var K=L.init(J[0],P.options||P).addClass("toolbar-item");if(P.id){K.attr("id",P.id)}if(P.name){K.attr("name",P.name)}if(P.cls){J.addClass(P.cls)}if(P.itemCls){K.addClass(P.itemCls)}if(P.style){J.css(P.style)}if(P.itemStyle){K.css(P.itemStyle)}if(P.width){J.css("width",P.width)}if(P.align){J.css("text-align",P.align)}if(P.htmlAttr){K.attr(P.htmlAttr)}n.data(K[0],"toolbar-item-data",{actions:L,target:K,options:p.options,type:P.type,container:J})}}}function F(L,I){if(!I){return}var K=n.data(L,"toolbar"),J=K.wrapper.find("tr:last");if(!J.length){J=n("<tr class='toolbar-row'></tr>").appendTo(K.wrapper)}var H=n("<td class='toolbar-item-container'></td>").appendTo(J);j(L,H,I)}function m(I,H){if(!H){return}if(n.array.likeArrayNotString(H)){if(H.length){n.each(H,function(J,K){m(I,K)})}}else{if(n.isFunction(H)){m(I,H.call(I),false)}else{F(I,H)}}}function g(L,J){var H=-1;if(!J){return H}J=n(J);var I=n(L),M=I.toolbar("wrapper"),K=M.find("tr:last");if(!K.length||n.contains(K[0],J[0])){return H}H=J.closest("toolbar-item-container").index();return H}function q(M,L){if(L==null||L==o){return null}var O=null,I,P=n(M),H=P.toolbar("wrapper"),N=H.find("tr:last");if(!N.length){return O}var K=N.find(">td.toolbar-item-container"),J=null;if(n.isNumeric(L)){if(K.length>=L&&L>=0){I=K.eq(L).find(".toolbar-item")}}if(I&&I.length){O=n.data(I[0],"toolbar-item-data")}return O}function e(J){var H=[],I=n(J),K=I.toolbar("wrapper");K.find("tr:last>td.toolbar-item-container .toolbar-item").each(function(){var L=n.data(this,"toolbar-item-data");if(L){H.push(L)}});return H}function C(J,H){var I=q(J,H);if(I){if(I.actions&&n.isFunction(I.actions.destroy)){actions.destroy(I.target[0])}I.container.remove()}}function h(J,K){if(!K||!n.isNumeric(K.index)||!K.item){return}var I=q(J,K.index),H=I.container.empty();j(J,H,K.item)}function v(I){var H=n.data(I,"toolbar");H.wrapper.empty();H.data=null}function d(K,J){var I=n.data(K,"toolbar"),H=I.options;I.data=H.loadFilter.call(K,J);I.wrapper.empty();m(K,I.data);H.onLoadSuccess.call(K,J)}function l(K,H){var J=n.data(K,"toolbar"),I=J.options;I.queryParams=H||{};if(I.onBeforeLoad.call(K,I.queryParams)==false){return}I.loader.call(K,I.queryParams,function(L){d(K,L)},function(){I.onLoadError.apply(this,arguments)})}function u(H){return n.data(H,"toolbar").data}function b(H){return n(H).serializeObject()}function A(J,H){var I=q(J,H);if(I){if(I.actions&&n.isFunction(I.actions.setFocus)){I.actions.setFocus(I.target[0])}else{I.target.focus()}}}function E(I,J){if(!J||!n.isNumeric(J.index)){return}var H=q(I,J.index);if(H&&H.actions&&n.isFunction(H.actions.setValue)){H.actions.setValue(H.target[0],J.value)}}function s(K,I){var J=q(K,I),H=null;if(J){H=J.actions&&n.isFunction(J.actions.getValue)?J.actions.getValue(J.target[0]):J.target[0].value}return H}function y(I,J){if(!J||!n.isNumeric(J.index)||!J.width){return}var H=q(I,index);if(H){if(H.actions&&n.isFunction(H.actions.resize)){H.actions.resize(H.target[0],J.width)}else{H.target.width(J.width)}}}function a(J,H){var I=q(J,H);if(I&&I.actions&&n.isFunction(I.actions.enable)){I.actions.enable(I.target[0])}}function x(J,H){var I=q(J,H);if(I&&I.actions&&n.isFunction(I.actions.disable)){I.actions.disable(I.target[0])}}function t(I){var H=e(I);n.each(H,function(J,K){if(K.actions&&n.isFunction(K.actions.enable)){K.actions.enable(K.target[0])}})}function i(I){var H=e(I);n.each(H,function(J,K){if(K.actions&&n.isFunction(K.actions.disable)){K.actions.disable(K.target[0])}})}function B(J){var H=n(J),I=n.data(J,"toolbar");if(I.toolbar){I.toolbar.each(function(){w(this)}).remove()}H.remove()}function w(I){var H=n(I);H.find(".combo-f").each(function(){n(this).combo("destroy")});H.find(".m-btn").each(function(){n(this).menubutton("destroy")});H.find(".s-btn").each(function(){n(this).splitbutton("destroy")});H.find(".tooltip-f").each(function(){n(this).tooltip("destroy")});H.children("div").each(function(){n(this)._fit(false)})}var c={separator:{init:function(H){return n("<div class='dialog-tool-separator'></div>").appendTo(H)}},label:{defaults:{text:" "},init:function(H,I){var J=n.extend({},this.defaults,I||{});return n("<span class='toolbar-item-label'></span>").text(J.text).appendTo(H)},enable:function(H){n(H).removeClass("toolbar-item-label-disabled")},disable:function(H){n(H).addClass("toolbar-item-label-disabled")}},button:{defaults:{plain:true,iconCls:"icon-ok"},init:function(H,I){var L=n.extend({},this.defaults,I||{}),K=L.onclick||L.handler,J=n("<a class='toolbar-item-button'></a>").appendTo(H);if(K){K=n.string.toFunction(K)}return J.linkbutton(n.extend(L,{onClick:function(){if(n.isFunction(K)){K.call(this,n(H).closest("table.toolbar-wrapper")[0])}}}))},enable:function(H){n(H).linkbutton("enable")},disable:function(H){n(H).linkbutton("disable")}},textbox:{defaults:{value:null,disabled:false,width:null},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H);if(K.value){this.setValue(J[0],K.value)}if(K.disabled){this.disable(J[0])}if(K.width){this.resize(J[0],K.width)}return J},setValue:function(I,H){n(I).val(H)},getValue:function(H){return n(H).val()},resize:function(I,H){n(I)._outerWidth(H)},enable:function(H){n(H).removeAttr("disabled",true)},disable:function(H){n(H).attr("disabled",true)}},checkbox:{defaults:{checked:false,disabled:false,text:" "},init:function(H,J){J=J||{};var M=n.extend({},this.defaults,n.util.isString(J)?{text:J}:J),I=n("<label class='toolbar-item-checkbox'></label>").appendTo(H),L=n("<input type='checkbox' class='toolbar-item-checkbox-input' />").appendTo(I),K=n("<span class='toolbar-item-checkbox-text'></span>").text(M.text).appendTo(I);if(M.checked){this.setValue(L[0],M.checked)}if(M.disabled){this.disable(L[0])}return L},setValue:function(I,H){n(I).attr("checked",H?true:false)},getValue:function(H){return n(H)[0].checked},enable:function(H){n(H).removeAttr("disabled").parent().find(">span.toolbar-item-checkbox-text").removeClass("toolbar-item-checkbox-disabled")},disable:function(H){n(H).attr("disabled",true).parent().find(">span.toolbar-item-checkbox-text").addClass("toolbar-item-checkbox-disabled")}},validatebox:{defaults:{value:null,disabled:false,width:null},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).validatebox(K);if(K.value){this.setValue(J[0],K.value)}if(K.disabled){this.disable(J[0])}if(K.width){this.resize(J[0],K.width)}return J},setValue:function(I,H){n(I).val(H)},getValue:function(H){return n(H).val()},resize:function(I,H){n(I)._outerWidth(H)},enable:function(H){n(H).removeAttr("disabled")},disable:function(H){n(H).attr("disabled",true)}},numberbox:{defaults:{width:null},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).numberbox(K);if(K.width){this.resize(J[0],K.width)}return J},destroy:function(H){n(H).numberbox("destroy")},setValue:function(I,H){n(I).numberbox("setValue",H)},getValue:function(H){return n(H).numberbox("getValue")},resize:function(I,H){n(I)._outerWidth(H)},enable:function(H){n(H).numberbox("enable")},disable:function(H){n(H).numberbox("disable")}},numberspinner:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).numberspinner(K);return J},destroy:function(H){n(H).numberspinner("destroy")},setValue:function(I,H){n(I).numberspinner("setValue",H)},getValue:function(H){return n(H).numberspinner("getValue")},resize:function(I,H){n(I).numberspinner("resize",H)},enable:function(H){n(H).numberspinner("enable")},disable:function(H){n(H).numberspinner("disable")}},timespinner:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).timespinner(K);return J},destroy:function(H){n(H).timespinner("destroy")},setValue:function(I,H){n(I).timespinner("setValue",H)},getValue:function(H){return n(H).timespinner("getValue")},resize:function(I,H){n(I).timespinner("resize",H)},enable:function(H){n(H).timespinner("enable")},disable:function(H){n(H).timespinner("disable")}},datebox:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).datebox(K);return J},destroy:function(H){n(H).datebox("destroy")},setValue:function(I,H){n(I).datebox("setValue",H)},getValue:function(H){return n(H).datebox("getValue")},resize:function(I,H){n(I).datebox("resize",H)},enable:function(H){n(H).datebox("enable")},disable:function(H){n(H).datebox("disable")},setFocus:function(H){n(H).datebox("textbox").focus()}},datetimebox:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).datetimebox(K);return J},destroy:function(H){n(H).datetimebox("destroy")},setValue:function(I,H){n(I).datetimebox("setValue",H)},getValue:function(H){return n(H).datetimebox("getValue")},resize:function(I,H){n(I).datetimebox("resize",H)},enable:function(H){n(H).datetimebox("enable")},disable:function(H){n(H).datetimebox("disable")},setFocus:function(H){n(H).datetimebox("textbox").focus()}},combo:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).combo(K);return J},destroy:function(H){n(H).combo("destroy")},setValue:function(I,H){n(I).combo(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.combo("options");return n(J).combo(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).combo("resize",H)},enable:function(H){n(H).combo("enable")},disable:function(H){n(H).combo("disable")},setFocus:function(H){n(H).combo("textbox").focus()}},combobox:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).combobox(K);return J},destroy:function(H){n(H).combobox("destroy")},setValue:function(I,H){n(I).combobox(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.combobox("options");return n(J).combobox(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).combobox("resize",H)},enable:function(H){n(H).combobox("enable")},disable:function(H){n(H).combobox("disable")},setFocus:function(H){n(H).combobox("textbox").focus()}},combotree:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).combotree(K);return J},destroy:function(H){n(H).combotree("destroy")},setValue:function(I,H){n(I).combotree(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.combotree("options");return n(J).combotree(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).combotree("resize",H)},enable:function(H){n(H).combotree("enable")},disable:function(H){n(H).combotree("disable")},setFocus:function(H){n(H).combotree("textbox").focus()}},combogrid:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).combogrid(K);return J},destroy:function(H){n(H).combogrid("destroy")},setValue:function(I,H){n(I).combogrid(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.combogrid("options");return n(J).combogrid(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).combogrid("resize",H)},enable:function(H){n(H).combogrid("enable")},disable:function(H){n(H).combogrid("disable")},setFocus:function(H){n(H).combogrid("textbox").focus()}},comboicons:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).comboicons(K);return J},destroy:function(H){n(H).comboicons("destroy")},setValue:function(I,H){n(I).comboicons(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.comboicons("options");return n(J).comboicons(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).comboicons("resize",H)},enable:function(H){n(H).comboicons("enable")},disable:function(H){n(H).comboicons("disable")},setFocus:function(H){n(H).comboicons("textbox").focus()}},comboselector:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).comboselector(K);return J},destroy:function(H){n(H).comboselector("destroy")},setValue:function(I,H){n(I).comboselector(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.comboselector("options");return n(J).comboselector(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).comboselector("resize",H)},enable:function(H){n(H).comboselector("enable")},disable:function(H){n(H).comboselector("disable")},setFocus:function(H){n(H).comboselector("textbox").focus()}},my97:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H).my97(K);return J},destroy:function(H){n(H).my97("destroy")},setValue:function(I,H){n(I).my97(n.util.likeArrayNotString(H)?"setValues":"setValue",H)},getValue:function(J){var I=n(J),H=I.my97("options");return n(J).my97(H.multiples?"getValues":"getValue")},resize:function(I,H){n(I).my97("resize",H)},enable:function(H){n(H).my97("enable")},disable:function(H){n(H).my97("disable")},setFocus:function(H){n(H).my97("textbox").focus()}},searchbox:{defaults:{},init:function(H,I){var K=n.extend({},this.defaults,I||{}),J=n("<input type='text' class='toolbar-item-input' />").appendTo(H);if(K.searcher){K.searcher=n.string.toFunction(K.searcher)}return J.searchbox(K)},destroy:function(H){n(H).searchbox("destroy")},setValue:function(I,H){n(I).searchbox("setValue",H)},getValue:function(H){return n(H).searchbox("getValue")},resize:function(I,H){n(I).searchbox("resize",H)},enable:function(H){n(H).searchbox("enable")},disable:function(H){n(H).searchbox("disable")},setFocus:function(H){n(H).searchbox("textbox").focus()}}},p={id:null,name:null,type:"button",options:null,cls:null,style:null,itemCls:null,itemStyle:null,width:null,align:null,htmlAttr:null},r=function(K,J,H){var I=n(this).toolbar("options");if(!I.url){return false}n.ajax({type:I.method,url:I.url,data:K,dataType:"json",success:function(L){J(L)},error:function(){H.apply(this,arguments)}})},G=function(H){return n.array.likeArrayNotString(H)?H:[]};c.text=c.textbox;c.linkbutton=c.button;n.fn.toolbar=function(H,I){if(typeof H=="string"){return n.fn.toolbar.methods[H](this,I)}H=H||{};return this.each(function(){var J=n.data(this,"toolbar");if(J){n.extend(J.options,H)}else{J=n.data(this,"toolbar",{options:n.extend({},n.fn.toolbar.defaults,n.fn.toolbar.parseOptions(this),H)})}f(this);if(J.options.data){d(this,J.options.data)}l(this)})};n.fn.toolbar.parseOptions=function(H){return n.extend({},n.parser.parseOptions(H,["url","data","method","width","height","align","valign"]))};n.fn.toolbar.methods={options:function(H){return n.data(H[0],"toolbar").options},wrapper:function(H){return n.data(H[0],"toolbar").wrapper},toolbar:function(H){return n.data(H[0],"toolbar").toolbar},resize:function(I,H){return I.each(function(){z(this,H)})},align:function(I,H){return I.each(function(){k(this,H)})},valign:function(I,H){return I.each(function(){D(this,H)})},getItems:function(H){return e(H[0])},getItem:function(I,H){return q(I[0],H)},getItemIndex:function(I,H){return g(I[0],H)},getData:function(H){return u(H[0])},getValues:function(H){return b(H[0])},appendItem:function(I,H){return I.each(function(){m(this,H)})},removeItem:function(I,H){return I.each(function(){C(this,H)})},updateItem:function(I,H){return I.each(function(){h(this,H)})},enableItem:function(I,H){return I.each(function(){a(this,H)})},disableItem:function(I,H){return I.each(function(){x(this,H)})},setItemFocus:function(I,H){return I.each(function(){A(this,H)})},setItemValue:function(I,H){return I.each(function(){E(this,H)})},getItemValue:function(I,H){return s(I[0],H)},resizeItem:function(I,H){return I.each(function(){y(this,H)})},enable:function(H){return H.each(function(){t(this)})},disable:function(H){return H.each(function(){i(this)})},clear:function(H){return H.each(function(){v(this)})},load:function(I,H){return I.each(function(){l(this,H)})},loadData:function(I,H){return I.each(function(){d(this,H)})},destroy:function(H){return H.each(function(){B(this)})}};n.fn.toolbar.defaults={url:null,data:null,method:"post",width:"auto",height:"auto",align:"left",valign:"middle",onResize:function(I,H){},onLoadSuccess:function(H){},onLoadError:function(){},onBeforeLoad:function(H){},itemTypes:c,loader:r,loadFilter:G,itemOptions:p};n.parser.plugins.push("toolbar")})(jQuery);