(function(z,l){function i(U){var R=z(U).addClass("euploadify-f").hide(),T=z.data(U,"euploadify"),S=T.options,Q=T.name=R.attr("name");T.uploadifyID="euploadify_"+z.util.guid("N");T.queueID="euploadify_queue_"+z.util.guid("N");T.lastFileID=null;T.panel=z('<div class="euploadify-panel"></div>').insertAfter(R).append(R).panel(z.extend({},S,{onResize:function(W,V){z.fn.panel.defaults.onResize.apply(this,arguments);z.extend(S,{width:W,height:V});E(U);if(z.isFunction(S.onResize)){S.onResize.apply(U,arguments)}}}));T.wrapper=T.panel.panel("body").addClass("euploadify-wrapper");T.queueDOM=z('<div id="'+T.queueID+'" class="euploadify-queue"></div>').appendTo(T.wrapper);T.queues=[];R.removeAttr(Q).attr("euploadifyName",Q);S.originalValue=S.value;S.originalFormData=z.extend({},S.formData);K(U);B(U,S.value);E(U);if(S.disabled){c(U,S.disabled)}G(U)}function I(R,Q,T){var S=z.array.first(R,function(U){return U.id==Q.id});if(S){S.filestatus=Q.filestatus;if(T!=null){S.value=T}}}function K(U){var ab=z(U),R=z.data(U,"euploadify"),Q=R.options,Z=String(Q.multiTemplate).toLowerCase();if(!z.array.contains(["uploadify","simple","bootstrap","grid"],Z)){Z=z.fn.euploadify.defaults.multiTemplate}var aa={auto:Q.auto,method:Q.method,multi:Q.multi,buttonClass:Q.buttonClass,buttonCursor:Q.buttonCursor,buttonImage:Q.buttonImage,buttonText:Q.buttonText,checkExisting:Q.checkExisting,debug:Q.debug,fileObjName:Q.fileObjName,fileSizeLimit:Q.fileSizeLimit,fileTypeDesc:Q.fileTypeDesc,fileTypeExts:Q.fileTypeExts,formData:Q.formData,progressData:Q.progressData,width:Q.buttonWidth,height:Q.buttonHeight,queueID:R.queueID,itemTemplate:Q.multi&&Z!="custome"?Q.multiTemplateData[Z]:Q.itemTemplate,overrideEvents:Q.overrideEvents,preventCaching:Q.preventCaching,queueSizeLimit:Q.queueSizeLimit,uploadLimit:Q.uploadLimit,removeCompleted:Q.removeCompleted,removeTimeout:Q.removeTimeout,requeueErrors:Q.requeueErrors,swf:Q.swf,uploader:Q.uploader,successTimeout:Q.successTimeout,onCancel:function(ad){z.array.remove(R.queues,ad,function(ae){return ad.id==ae.id});return Q.onCancel.apply(U,arguments)},onClearQueue:function(){R.queues=[];return Q.onClearQueue.apply(U,arguments)},onDestroy:function(){R.queues=null;return Q.onDestroy.apply(U,arguments)},onDialogClose:function(){return Q.onDialogClose.apply(U,arguments)},onDialogOpen:function(){return Q.onDialogOpen.apply(U,arguments)},onDisable:function(){return Q.onDisable.apply(U,arguments)},onEnable:function(){return Q.onEnable.apply(U,arguments)},onFallback:function(){return Q.onFallback.apply(U,arguments)},onInit:function(){return Q.onInit.apply(U,arguments)},onQueueComplete:function(){return Q.onQueueComplete.apply(U,arguments)},onSelect:function(ad){R.queues.push(z.extend({},ad));return Q.onSelect.apply(U,arguments)},onSelectError:function(){return Q.onSelectError.apply(U,arguments)},onSWFReady:function(){return Q.onSWFReady.apply(U,arguments)},onUploadComplete:function(ad){I(R.queues,ad);return Q.onUploadComplete.apply(U,arguments)},onUploadError:function(ad,ag,af,ae){I(R.queues,ad);return Q.onUploadError.apply(U,arguments)},onUploadProgress:function(ae,ah,ag,ad,af){return Q.onUploadProgress.apply(U,arguments)},onUploadStart:function(ad){I(R.queues,ad);return Q.onUploadStart.apply(U,arguments)},onUploadSuccess:function(af,ag,ae){var ah=Q.responseFilter.call(U,ag,af),ai=af.value=ah&&ah.value!=null&&ah.value!=l?ah.value:null;I(R.queues,af,ai);var ad=Q.multi?z.array.map(m(U,-4),function(aj){return aj.value}):[ai];B(U,ad);return Q.onUploadSuccess.apply(U,arguments)}};if(Q.multi){R.wrapper.addClass("euploadify-wrapper-multi euploadify-wrapper-multi-"+Z);R.buttonbar=z('<div class="euploadify-buttonbar"></div>').insertBefore(R.queueDOM);if(Z=="grid"){d(U,aa)}else{x(U,aa)}}else{R.wrapper.addClass("euploadify-wrapper-single");R.queueDOM.addClass("euploadify-hidden");R.progressbar=z('<div class="euploadify-progressbar"></div>').insertBefore(R.queueDOM).progressbar({width:400,height:18,value:0,text:Q.emptyText});R.buttonbar=z('<div class="euploadify-buttonbar"></div>').insertAfter(R.progressbar);var Y=aa.onCancel,W=aa.onSelect,T=aa.onUploadStart,S=aa.onUploadProgress,X=aa.onUploadError,V=aa.onUploadSuccess;z.extend(aa,{onCancel:function(ae){var ad=Y.apply(this,arguments),af=y(U);if(!af.length){R.progressbar.progressbar("setText",Q.emptyText).progressbar("setValue",0);return ad}if(af.length){R.progressbar.progressbar("setText",n(U,af[0])+"("+z.number.toFileSize(ae.size)+") - 0%").progressbar("setValue",0)}else{R.progressbar.progressbar("setText",Q.emptyText).progressbar("setValue",0)}return ad},onSelect:function(ae){var ad=W.apply(this,arguments);if(R.lastFileID&&!Q.multi){R.uploadify.uploadify("cancel",R.lastFileID)}if(ae){R.progressbar.progressbar("setText",n(U,ae)+"("+z.number.toFileSize(ae.size)+") - 0%").progressbar("setValue",0).find(".progressbar-value .progressbar-text").removeClass("progressbar-text-success progressbar-text-error");R.lastFileID=ae.id}else{R.progressbar.progressbar("setText",Q.emptyText).progressbar("setValue",0).find(".progressbar-value .progressbar-text").removeClass("progressbar-text-success progressbar-text-error")}return ad},onUploadStart:function(ae){var ad=T.apply(this,arguments);ab.euploadify("resetFormData");var af=z.extend({},ae,{customeName:ae.name}),ag=Q.requestFilter.call(U,af,ae);R.uploadify.uploadify("settings","formData",ag);return ad},onUploadProgress:function(af,aj,ah,ad,ag){var ae=S.apply(this,arguments),ai=!ah?0:(aj/ah*100).round(2);R.progressbar.progressbar("setText",n(U,af)+"("+z.number.toFileSize(af.size)+") - {value}%").progressbar("setValue",ai).find(".progressbar-value .progressbar-text").removeClass("progressbar-text-success progressbar-text-error");return ae},onUploadError:function(ae,ah,ag,af){var ad=X.apply(this,arguments);if(!z.array.contains(["Cancelled","Stopped"],af)){R.progressbar.progressbar("setText",n(U,ae)+"("+Q.errorText+":"+af+")").find(".progressbar-value .progressbar-text").removeClass("progressbar-text-success progressbar-text-error").addClass("progressbar-text-error")}return ad},onUploadSuccess:function(af,ag,ad){var ae=V.apply(this,arguments);R.progressbar.progressbar("setText",n(U,af)+"("+Q.finishText+")").progressbar("setValue",100).find(".progressbar-value .progressbar-text").removeClass("progressbar-text-success progressbar-text-error").addClass("progressbar-text-success");return ae}})}R.button=z('<a class="l-btn l-btn-small euploadify-button euploadify-select'+(Q.buttonPlain?" l-btn-plain":"")+'"><span class="l-btn-left l-btn-icon-left"><span class="l-btn-icon '+Q.buttonIcon+'">&nbsp;</span></span></a>').appendTo(R.buttonbar);R.uploadify=z('<input id="'+R.uploadifyID+'" type="file" />').insertBefore(R.button.find("span.l-btn-icon")).uploadify(aa);R.uploadify=z("#"+R.uploadifyID);R.uploadButton=z('<a class="euploadify-button euploadify-upload'+(Q.auto&&!Q.multi?" euploadify-hidden":"")+'"></a>').appendTo(R.buttonbar).linkbutton({plain:Q.buttonPlain,text:Q.uploadText,iconCls:Q.uploadIcon,onClick:function(){var ae=y(U),ad=z.array.first(ae,function(af){return af.filestatus!=-4});if(!ae||!ae.length||!ad){return z.easyui.messager.show(Q.message.queueEmpty)}R.uploadify.uploadify("upload","*")}});R.stopButton=z('<a class="euploadify-button euploadify-stop'+(!Q.showStop?" euploadify-hidden":"")+'"></a>').appendTo(R.buttonbar).linkbutton({plain:Q.buttonPlain,text:Q.stopText,iconCls:Q.stopIcon,onClick:function(){R.uploadify.uploadify("stop");return Q.onButtonStop.call(U,y(U),this)}});R.cancelButton=z('<a class="euploadify-button euploadify-cancel'+(!Q.showCancel?" euploadify-hidden":"")+'"></a>').appendTo(R.buttonbar).linkbutton({plain:Q.buttonPlain,text:Q.cancelText,iconCls:Q.cancelIcon,onClick:function(){R.uploadify.uploadify("cancel","*")}});if(Q.multi&&Z=="grid"){z("<span>-</span>").insertAfter(R.button);if(!Q.auto){z("<span>-</span>").insertAfter(R.uploadButton)}if(Q.showStop||Q.showCancel){z("<span>-</span>").appendTo(R.buttonbar)}R.removeButton=z('<a class="euploadify-button"></a>').appendTo(R.buttonbar).linkbutton({plain:Q.buttonPlain,text:Q.removeText,iconCls:"icon-hamburg-busy",onClick:function(){var ae=R.grid.datagrid("getChecked"),af=z.array.clone(ae);if(!ae||!ae.length){return z.easyui.messager.show(Q.message.mustNotEmpty)}z.each(af,function(ah,ai){var ag=R.grid.datagrid("getRowIndex",ai);if(ag>-1){R.grid.datagrid("deleteRow",ag)}R.uploadify.uploadify("cancel",ai.id);z.array.remove(R.queues,ai,function(aj){return ai.id==aj.id})});var ad=z.array.map(m(U,-4),function(ag){return ag.value});B(U,ad)}});R.buttonbar.toolbar()}if(Q.tooltip){var ac=Q.tooltip===true?z.fn.euploadify.defaults.tooltip:Q.tooltip;if(R.button){R.button.tooltip({content:ac.button})}if(R.uploadButton){R.uploadButton.tooltip({content:ac.upload})}if(R.stopButton){R.stopButton.tooltip({content:ac.stop})}if(R.cancelButton){R.cancelButton.tooltip({content:ac.cancel})}if(R.removeButton){R.removeButton.tooltip({content:ac.remove})}}}function x(V,S){var R=z(V),U=z.data(V,"euploadify"),T=U.options,Q=S.onUploadStart;U.queueDOM.on("click",".uploadify-queue-item .cancel a",function(){var Y=z(this).closest(".uploadify-queue-item"),Z=Y.attr("id");z.array.remove(U.queues,Z,function(aa){return aa.id==Z});var X=m(V,-4),W=z.array.map(X,function(aa){return aa.value});B(V,W.length?W:[null])});z.extend(S,{onUploadStart:function(X){var W=Q.apply(this,arguments);R.euploadify("resetFormData");var Y=z.extend({},X,{customeName:X.name}),Z=T.requestFilter.call(V,Y,X);U.uploadify.uploadify("settings","formData",Z);return W}})}function d(Z,ad){var ae=z(Z),T=z.data(Z,"euploadify"),R=T.options,Y=T.layout=z('<div class="euploadify-gridpanel-layout"></div>').insertBefore(T.queueDOM),X=T.north=z('<div class="euploadify-gridpanel-north" data-options="region: \'north\', split: false, border: false" style="height: 33px;"></div>').appendTo(Y).append(T.buttonbar),S=T.center=z('<div class="euploadify-gridpanel-center" data-options="region: \'center\', border: false"></div>').appendTo(Y),Q=T.grid=z('<table class="euploadify-gridpanel-grid"></table>').appendTo(S);T.queueDOM.addClass("euploadify-hidden");Y.layout({fit:true});Q.datagrid({fit:true,border:false,idField:"id",rownumbers:true,refreshMenu:false,extEditing:true,singleEditing:true,frozenColumns:[[{field:"ck",checkbox:true,filterable:false},{field:"name",title:"全文件名",width:100,filterable:false}]],columns:[[{field:"customeName",title:R.gridColumnNames.customeName,width:120,editor:"text",filterable:false},{field:"type",title:R.gridColumnNames.type,width:60,filterable:false},{field:"size",title:R.gridColumnNames.size,width:80,filterable:false,formatter:function(af){return z.number.toFileSize(af)}},{field:"progress",title:R.gridColumnNames.progress,width:80,align:"center",filterable:false,formatter:function(ag,af){return'<div class="euploadify-gridpanel-progress"><div class="euploadify-gridpanel-progress-value'+(af.filestatus==-3?" euploadify-gridpanel-progress-error":(af.filestatus==-4?" euploadify-gridpanel-progress-success":""))+'" style="width: '+String(ag||0)+'%;"></div></div>'}},{field:"progressValue",title:R.gridColumnNames.progressValue,width:50,filterable:false,formatter:function(af){return String(af||0)+"%"}},{field:"filestatus",title:R.gridColumnNames.filestatus,width:80,filterable:false,formatter:function(aj,ai,ag){var ah=R.FILE_STATUS[aj],af=aj==-3?('<span title="'+ai.errorString+'" class="euploadify-gridpanel-status euploadify-gridpanel-status-error">'+ah+"</span>"):(aj==-4?('<span class="euploadify-gridpanel-status euploadify-gridpanel-status-success">'+ah+"</span>"):ah);return af}},{field:"operate",title:R.gridColumnNames.operate,width:80,filterable:false,formatter:function(ag,af){return'<div title="'+R.gridRowButtonNames.cancel+'" class="euploadify-button-mini" onclick="javascript: return $.fn.euploadify.cancelQueue(this);">                                    <span class="euploadify-button-mini-icon icon-standard-delete">&nbsp;</span>                                </div>                                <div title="'+R.gridRowButtonNames.upload+'" class="euploadify-button-mini" onclick="javascript: return $.fn.euploadify.uploadQueue(this);">                                    <span class="euploadify-button-mini-icon icon-standard-arrow-up">&nbsp;</span>                                </div>'}}]],rowContextMenu:[{text:R.gridRowContextNames.edit,iconCls:"icon-edit",disabled:function(){return R.disabled||T.wrapper.is(".euploadify-disabled")},handler:function(ag,af,ah){Q.datagrid("beginEdit",af)}},{text:R.gridRowContextNames.cancel,iconCls:"icon-standard-delete",disabled:function(){return R.disabled||T.wrapper.is(".euploadify-disabled")},handler:function(ag,af,ah){if(ah.filestatus==-4){z.easyui.messager.show(R.message.fileUploadSuccessCanntCancel)}else{T.uploadify.uploadify("cancel",ah.id)}}},{text:R.gridRowContextNames.upload,iconCls:"icon-standard-arrow-up",disabled:function(){return R.disabled||T.wrapper.is(".euploadify-disabled")},handler:function(ag,af,ah){if(ah.filestatus==-4){z.easyui.messager.show(R.message.fileUploadSuccess)}else{T.uploadify.uploadify("upload",ah.id)}}}],onBeginEdit:function(af,ah){if(z.array.contains([-2,-4,-5],ah.filestatus)){var ag=z.string.format(R.message.fileCannotRename,R.FILE_STATUS[ah.filestatus]);z.easyui.messager.show(ag);Q.datagrid("cancelEdit",af)}return z.fn.datagrid.defaults.onBeginEdit.apply(this,arguments)},onAfterEdit:function(ah,aj,ai){if(!aj.customeName){z.easyui.messager.show(R.message.fileNameCannotEmpty);var ak=String(aj.name).split("."),af=z.array.removeAt(ak,ak.length-1),ag=af.join("");Q.datagrid("updateRow",{index:ah,row:{customeName:ag}})}return z.fn.datagrid.defaults.onAfterEdit.apply(this,arguments)}});var ac=ad.onCancel,aa=ad.onSelect,V=ad.onUploadStart,U=ad.onUploadProgress,ab=ad.onUploadError,W=ad.onUploadComplete;z.extend(ad,{onCancel:function(ah){var ag=ac.apply(this,arguments),ai=ah.id,af=Q.datagrid("getRowIndex",ai);if(af>-1){Q.datagrid("deleteRow",af)}return ag},onSelect:function(aj){var ah=aa.apply(this,arguments),ag=String(aj.name).split("."),ai=z.array.removeAt(ag,ag.length-1),af=ai.join(""),ak=z.extend({},aj,{customeName:af,progress:0,progressValue:0});Q.datagrid("appendRow",ak);return ah},onUploadStart:function(ah){var ag=V.apply(this,arguments),al=ah.id,af=Q.datagrid("getRowIndex",al),ak=af>-1?Q.datagrid("getRowData",af):null;if(ak){ae.euploadify("resetFormData");var ai=z.extend({},ak,{customeName:ak.customeName+ah.type}),aj=R.requestFilter.call(Z,ai,ah);T.uploadify.uploadify("settings","formData",aj);Q.datagrid("updateRow",{index:af,row:{filestatus:ah.filestatus}})}return ag},onUploadProgress:function(ah,ai,aj,an,am){var al=U.apply(this,arguments),ag=!aj?0:(ai/aj*100).round(2),af=ah.id,ak=Q.datagrid("getRowIndex",af);if(ak>-1){Q.datagrid("updateRow",{index:ak,row:{progress:ag,progressValue:ag,filestatus:ah.filestatus}})}return al},onUploadError:function(ah,ak,aj,ai){var ag=ab.apply(this,arguments),am=ah.id,af=Q.datagrid("getRowIndex",am),al=af>-1?Q.datagrid("getRowData",af):null;if(al){T.uploadify.uploadify("settings","formData",al);Q.datagrid("updateRow",{index:af,row:{errorString:ak+","+aj+","+ai}})}return ab.apply(this,arguments)},onUploadComplete:function(ah){var ag=W.apply(this,arguments),ai=ah.id,af=Q.datagrid("getRowIndex",ai);if(af>-1){Q.datagrid("updateRow",{index:af,row:{filestatus:ah.filestatus}})}return ag}})}function M(S){var R=z.data(S,"euploadify"),Q=R.panel.panel("options");return z.extend(R.options,{title:Q.title,iconCls:Q.iconCls,width:Q.width,height:Q.height,left:Q.left,top:Q.top,cls:Q.cls,headerCls:Q.headerCls,bodyCls:Q.bodyCls,style:Q.style,fit:Q.fit,border:Q.border,doSize:Q.doSize,noheader:Q.noheader,collapsible:Q.collapsible,minimizable:Q.minimizable,maximizable:Q.maximizable,closable:Q.closable,collapsed:Q.collapsed,minimized:Q.minimized,maximized:Q.maximized,closed:Q.closed})}function a(Q){return z.data(Q,"euploadify").uploadify}function P(Q){return z.data(Q,"euploadify").buttonbar.find("a.euploadify-button")}function n(R,Q){if(!Q||!Q.name){return z(R).euploadify("options").emptyText}return z.string.getByteLen(Q.name)>28?z.string.leftBytes(Q.name,25)+"...":Q.name}function b(Q){return z.data(Q,"euploadify").queueDOM}function k(Q){return z.data(Q,"euploadify").grid}function y(Q){return z.array.clone(z.data(Q,"euploadify").queues)}function m(R,Q){return z.array.filter(y(R),function(S){return S.filestatus==Q})}function E(V){var R=z(V),U=z.data(V,"euploadify"),T=U.options;if(U.buttonbar&&U.progressbar&&!T.multi){var Q=R._fit(false),S=Q.width-U.buttonbar.outerWidth()-15;U.progressbar.progressbar("resize",S)}}function e(R,S){var Q=z.data(R,"euploadify");Q.uploadify.uploadify("cancel",S)}function J(S){var Q=z(S),R=z.data(S,"euploadify");R.uploadify.uploadify("destroy");R.panel.panel("destroy");Q.remove()}function c(V,U){if(U==null||U==l){U=true}var Q=z(V),T=z.data(V,"euploadify"),S=T.options;S.disabled=U;var R=T.buttonbar.find(".euploadify-button:not(.euploadify-select)");if(U){Q.attr("disabled",true);T.wrapper.addClass("euploadify-disabled");T.button.addClass("l-btn-disabled");if(S.buttonPlain){T.button.addClass("l-btn-plain-disabled")}z.util.tryExec(function(){T.uploadify.uploadify("stop")});R.linkbutton("disable")}else{Q.removeAttr("disabled");T.wrapper.removeClass("euploadify-disabled");T.button.removeClass("l-btn-disabled");if(S.buttonPlain){T.button.removeClass("l-btn-plain-disabled")}R.linkbutton("enable")}z.util.tryExec(function(){T.uploadify.uploadify("disable",U)})}function g(Q){c(Q,false)}function p(Q){z.data(Q,"euploadify").uploadify.uploadify("stop")}function u(Q,R){z.data(Q,"euploadify").uploadify.uploadify("upload",R)}function o(R,S){var Q=z.data(R,"euploadify");Q.panel.panel("resize",S)}function N(T,U){var Q=z(T);if(!U){return Q}var S=z.data(T,"euploadify"),R=S.options;if(typeof U=="string"){return R[U]}else{if(U.name){R[U.name]=U.value;S.uploadify.uploadify("settings",U.name,U.value)}return Q}}function h(U,V){V=V||{};var T=z.data(U,"euploadify"),S=T.options,Q=T.uploadify.data("uploadify"),R=Q.settings;R.formData={};Q.setPostParams(S.formData=z.extend(R.formData,V))}function t(S){var R=z.data(S,"euploadify"),Q=R.options;h(S,Q.originalFormData)}function O(Q){h(Q,{})}function q(R){var Q=z.data(R,"euploadify");Q.tip=false;Q.wrapper.tooltip("hide")}function j(S){var R=z.data(S,"euploadify"),Q=R.options;R.wrapper.tooltip(z.extend({},Q.tipOptions,{content:Q.missingMessage,position:Q.tipPosition,deltaX:Q.deltaX})).tooltip("show");R.tip=true}function w(R){var Q=z.data(R,"euploadify");if(Q&&Q.tip){Q.wrapper.tooltip("reposition")}}function s(T){var Q=z(T),S=z.data(T,"euploadify"),R=S.options;S.wrapper.unbind(".euploadify");if(R.novalidate){return}S.wrapper.bind("focus.euploadify",function(){S.validating=true;S.values=l;(function(){if(S.validating){var U=Q.euploadify("getValues").join(R.separator);if(S.values!=U){S.values=U;if(S.timer){clearTimeout(S.timer)}S.timer=setTimeout(function(){Q.euploadify("validate")},R.delay)}else{w(T)}setTimeout(arguments.callee,200)}})()}).bind("blur.euploadify",function(){if(S.timer){clearTimeout(S.timer);S.timer=l}S.validating=false;q(T)}).bind("mouseenter.euploadify",function(){if(S.wrapper.hasClass("euploadify-invalid")){j(T)}}).bind("mouseleave.euploadify",function(){if(!S.validating){q(T)}})}function r(U){var R=z(U),T=z.data(U,"euploadify"),S=T.options,Q=R.euploadify("getValues"),V=Q.join(S.separator);T.wrapper.removeClass("euploadify-invalid");q(U);if(!S.novalidate&&S.required&&(!Q.length||!V)&&!R.is(":disabled")&&!T.wrapper.hasClass("euploadify-disabled")){T.wrapper.addClass("euploadify-invalid");if(T.validating){j(U)}return false}return true}function G(T,Q){var S=z.data(T,"euploadify"),R=S.options;if(Q!=l&&Q!=null){R.novalidate=Q}if(R.novalidate){S.wrapper.removeClass("euploadify-invalid");q(T)}s(T)}function v(U){var T=z.data(U,"euploadify"),S=T.options,Q=T.wrapper.find(".euploadify-value"),R=z.array.map(Q,function(V){return z(V).val()});T.values=R.join(S.separator);return S.values=R}function F(R){var Q=v(R);return Q[0]}function B(V,Q){var S=z(V),U=z.data(V,"euploadify"),T=U.options,R=S.euploadify("getValues"),X=z.util.likeArrayNotString(Q)?Q:[Q];U.wrapper.find(".euploadify-value").remove();z.each(X,function(Y,aa){var Z=z('<input class="euploadify-value" type="hidden" />').appendTo(U.wrapper).val(aa);if(U.name){Z.attr("name",U.name)}});var W=z.array.filter(X,function(Y){return z.array.contains(R,Y)?false:true});if(W.length!=X.length||X.length!=R.length){if(T.multi){T.onChange.call(V,X,R)}else{T.onChange.call(V,X[0],R[0])}}U.values=X.join(T.separator);T.values=X}function A(R,Q){B(R,[Q])}function D(Q){B(Q,[])}function H(S){var R=z.data(S,"euploadify"),Q=R.options;B(S,Q.originalValue)}function C(R){var Q=z.data(R,"euploadify");Q.panel.panel("open");return M(R)}function L(R){var Q=z.data(R,"euploadify");Q.panel.panel("close");return M(R)}z.fn.euploadify=function(Q,R){if(typeof Q=="string"){var S=z.fn.euploadify.methods[Q];if(S){return S(this,R)}else{return this.euploadify("panel").panel(Q,R)}}Q=Q||{};return this.each(function(){var T=z.data(this,"euploadify");if(T){z.extend(T.options,Q)}else{z.data(this,"euploadify",{options:z.extend({},z.fn.euploadify.defaults,z.fn.euploadify.parseOptions(this),Q)});i(this)}})};function f(V,Q){var T=z(V),X=T.closest("div.euploadify-wrapper").find(".euploadify-f"),S=z.data(X[0],"euploadify"),R=S.options;if(!R.disabled&&!S.wrapper.is(".euploadify-disabled")){var W=window.parseInt(T.closest("tr.datagrid-row").attr("datagrid-row-index")),Y=S.grid.datagrid("getRowData",W);if(Y.filestatus==-4){var U={cancel:R.message.fileUploadSuccessCanntRemove,upload:R.message.fileUploadSuccess};z.easyui.messager.show(U[Q])}else{S.uploadify.uploadify(Q,Y.id)}}if(window.event&&window.event.stopPropagation){window.event.stopPropagation()}return false}z.fn.euploadify.cancelQueue=function(Q){return f(Q,"cancel")};z.fn.euploadify.uploadQueue=function(Q){return f(Q,"upload")};z.fn.euploadify.parseOptions=function(Q){return z.extend({},z.parser.parseOptions(Q,["buttonClass","buttonCursor","buttonImage","buttonText","checkExisting","fileObjName","fileTypeDesc","fileTypeExts","itemTemplate","method","progressData","queueID","swf","uploader","uploadText","stopText","cancelText","removeText","emptyText","finishText","errorText","buttonIcon","stopIcon","cancelIcon","uploadIcon","multiTemplate","value","width","height","missingMessage","tipPosition","separator",{auto:"boolean",debug:"boolean",multi:"boolean",preventCaching:"boolean",removeCompleted:"boolean",requeueErrors:"boolean",disabled:"boolean",buttonPlain:"boolean",showStop:"boolean",showCancel:"boolean",required:"boolean",novalidate:"boolean"},{fileSizeLimit:"number",height:"number",queueSizeLimit:"number",removeTimeout:"number",successTimeout:"number",uploadLimit:"number",width:"number",buttonWidth:"number",buttonHeight:"number",deltaX:"number"}]))};z.easyui.showEuploadifyDialog=function(S){if(S&&S.topMost&&z!=z.util.$&&z.util.$.easyui.showEuploadifyDialog){return z.util.$.easyui.showEuploadifyDialog.apply(this,S)}var T=z.extend({},z.easyui.showEuploadifyDialog.defaults,S||{}),R,V,U=T.value,W=z.easyui.showDialog(z.extend({},T,{content:'<input class="euploadify-dialog-container" />',enableApplyButton:false,topMost:false,height:T.height=="auto"?(T.multi?480:160):T.height,onBeforeDestroy:function(){if(R){R.euploadify("destroy")}},onSave:function(){return T.onEnter.call(W,Q(),R,V,this)},onClose:function(){return T.onCancel.call(W,Q(),R,V,this)}}));z.util.exec(function(){var X=W.find(".euploadify-dialog-container").euploadify(z.extend({},T,{fit:true,border:false,noheader:true,value:U}));W.euploadify=R=X;V=X.euploadify("uploadify");R.euploadify("resize")});function Q(){if(!R||!V){return U}var X=R.euploadify("options");return R.euploadify(X.multi?"getValues":"getValue")}return W};z.easyui.showEuploadifyDialog.defaults={title:"文件上传对话框",iconCls:"icon-hamburg-publish",width:750,height:"auto",minWidth:400,minHeight:160,maximizable:true,collapsible:true,multi:false,value:null,onEnter:function(S,R,Q){},onCancel:function(S,R,Q){}};z.fn.euploadify.methods={options:function(Q){return M(Q[0])},panel:function(Q){return z.data(Q[0],"euploadify").panel},uploadify:function(Q){return a(Q[0])},buttons:function(Q){return P(Q[0])},queueDOM:function(Q){return b(Q[0])},grid:function(Q){return k(Q[0])},cancel:function(R,Q){return R.each(function(){e(this,Q)})},destroy:function(Q){return Q.each(function(){J(this)})},disable:function(R,Q){return R.each(function(){c(this,Q)})},settings:function(R,Q){return N(R[0],Q)},stop:function(Q){return Q.each(function(){p(this)})},queues:function(Q){return y(Q[0])},upload:function(R,Q){return R.each(function(){u(this,Q)})},setFormData:function(R,Q){return R.each(function(){h(this,Q)})},resetFormData:function(Q){return Q.each(function(){t(this)})},clearFormData:function(Q){return Q.each(function(){O(this)})},resize:function(R,Q){return R.each(function(){o(this,Q)})},enable:function(Q){return Q.each(function(){g(this)})},validate:function(Q){return Q.each(function(){r(this)})},isValid:function(Q){return r(Q[0])},enableValidation:function(Q){return Q.each(function(){G(this,false)})},disableValidation:function(Q){return Q.each(function(){G(this,true)})},clear:function(Q){return Q.each(function(){D(this)})},reset:function(Q){return Q.each(function(){H(this)})},getValues:function(Q){return v(Q[0])},setValues:function(R,Q){return R.each(function(){B(this,Q)})},getValue:function(Q){return F(Q[0])},setValue:function(R,Q){return R.each(function(){A(this,Q)})},show:function(Q){return Q.each(function(){C(this)})},hide:function(Q){return Q.each(function(){L(this)})}};z.fn.euploadify.defaults={width:120,height:30,auto:true,swf:"uploadify.swf",uploader:"uploadify.php",uploadLimit:999,method:"post",successTimeout:30,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:false,debug:false,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",formData:{},itemTemplate:false,multi:true,overrideEvents:[],preventCaching:true,progressData:"percentage",queueID:false,queueSizeLimit:999,removeCompleted:true,removeTimeout:3,requeueErrors:false,onCancel:function(Q){},onClearQueue:function(){},onDestroy:function(){},onDialogClose:function(Q){},onDialogOpen:function(){},onDisable:function(){},onEnable:function(){},onFallback:function(){},onInit:function(Q){},onQueueComplete:function(Q){},onSelect:function(Q){},onSelectError:function(Q,S,R){},onSWFReady:function(){},onUploadComplete:function(Q){},onUploadError:function(Q,T,S,R){},onUploadProgress:function(R,U,T,Q,S){},onUploadStart:function(Q){},onUploadSuccess:function(R,S,Q){}};z.extend(z.fn.euploadify.defaults,{successTimeout:3600,removeCompleted:false,formData:{folder:"uploads"},buttonText:"选择文件...",multi:false,auto:true,uploadText:"上传",stopText:"停止上传",cancelText:"取消上传",removeText:"移除选择",emptyText:"未选择文件",finishText:"上传完成!",errorText:"上传失败",tooltip:{button:"打开文件浏览器窗口并选择需要上传的文件",upload:"上传当前文件队列中所有未上传的文件",stop:"停止当前文件上传队列中所有文件的上传动作",cancel:"取消当前文件队列中所有未上传文件的上传任务",remove:"取消选定行的上传任务并删除该行"},message:{queueEmpty:"当前上传队列中没有待上传文件.",mustNotEmpty:"请至少选择一行数据.",fileUploadSuccessCanntCancel:"该文件已经上传完成，无法取消！",fileUploadSuccess:"该文件已经上传完成！",fileCannotRename:'该文件处于"{0}"状态，不能编辑"自定义文件名"，编辑状态已撤销.',fileNameCannotEmpty:"自定义文件名不能为空（已经恢复）",fileUploadSuccessCanntRemove:'该文件已经上传完成，无法取消(如想移除该行请选中该行后点击上方按钮"移除选择")！'},gridColumnNames:{name:"全文件名",customeName:"自定义文件名",type:"类型",size:"大小",progress:"上传进度",progressValue:"进度值",filestatus:"状态",operate:"操作"},gridRowButtonNames:{cancel:"取消",upload:"上传"},gridRowContextNames:{edit:"编辑文件名",cancel:"取消该文件",upload:"上传该文件"},FILE_STATUS:{"-1":"等待上传","-2":"正在上传...","-3":"上传出错","-4":"上传完成","-5":"已取消"},buttonIcon:"icon-search",stopIcon:"icon-hamburg-stop",cancelIcon:"icon-standard-cancel",uploadIcon:"icon-hamburg-publish",response:{id:null,status:false,message:null,value:null,url:null},requestFilter:function(R,Q){return R},responseFilter:function(R,Q){return z.util.tryExec(function(){return z.util.parseJSON(R)})},multiTemplate:"grid",multiTemplateData:{uploadify:z.fn.euploadify.defaults.itemTemplate,simple:'<div id="${fileID}" class="uploadify-queue-item">            		<div class="cancel">            			<a href="javascript:$(\'#${instanceID}\').uploadify(\'cancel\', \'${fileID}\')">X</a>            		</div>            		<span class="fileName">${fileName} (${fileSize})</span><span class="data"></span>            	 </div>',bootstrap:""},value:null,disabled:false,buttonPlain:true,width:"auto",height:"auto",buttonWidth:90,buttonHeight:24,showStop:false,showCancel:false,required:false,missingMessage:"附件(文件/档)不能为空,请上传.",tipPosition:"right",deltaX:0,tipOptions:z.fn.validatebox.defaults.tipOptions,separator:",",novalidate:false,onChange:function(R,Q){},onButtonStop:function(R,Q){}});z.parser.plugins.push("euploadify");if(z.fn.form&&z.isArray(z.fn.form.otherList)){z.fn.form.otherList.push("euploadify")}})(jQuery);