(function(g,c){g.fn.combo.extensions={};function n(u,p){var r=g(u),s=r.combo("options"),q=r.combo("textbox");s.prompt=p;q.validatebox("setPrompt",p)}function b(v,q){var p=g(v),s=g.data(v,"combo"),u=s.combo;var r=u.find("span.combo-arrow").removeAttr("class").addClass("combo-arrow");if(q){r.addClass(q)}p.combo("options").iconCls=q}function o(s,u){var q=g(s),r=q.combo("options"),p=q.combo("textbox");r.required=p.validatebox("options").required=u}var k=g.fn.combo.methods.destroy;function m(r){var p=g(r),q=p.combo("options");if(g.isFunction(q.onBeforeDestroy)&&q.onBeforeDestroy.call(r)==false){return}k.call(r,p);if(g.isFunction(q.onDestroy)){q.onDestroy.call(r)}}function l(p){return g.data(p,"combo").combo}var i=g.fn.combo.methods.setValues;function j(s,p){var q=g(s),r=q.combo("options");if(!r.nullable&&g.array.isNullOrEmpty(p)){p=[null]}return i.call(q,q,p)}function h(s){var q=g.data(s,"combo"),p=q.options,r=q.combo;if(p.multiple){r.find("input.combo-value"+(p.nullable?"":":gt(0)")).remove()}r.find("input.combo-value,input.combo-text").val("")}function f(w){var r=g(w),u=g.data(w,"combo"),s=r.combo("options"),p=u.panel,v=u.combo,q=s.extensions?s.extensions:s.extensions={};if(!q._initialized){r.combo("textbox").focus(function(){if(s.autoShowPanel&&p.is(":hidden")){r.combo("showPanel")}});if(s.iconCls){r.combo("setIcon",s.iconCls)}if(g.util.browser.msie&&v._outerWidth()!=s.width){g.util.exec(function(){r.combo("resize",s.width)})}q._initialized=true}}var e=g.fn.combo;g.fn.combo=function(p,q){if(typeof p=="string"){return e.apply(this,arguments)}p=p||{};return this.each(function(){var t=g(this),r=g.data(this,"combo")?true:false,s=r?p:g.extend({},g.fn.combo.parseOptions(this),g.parser.parseOptions(this,["iconCls",{autoShowPanel:"boolean"}]),p);e.call(t,s);f(this)})};g.union(g.fn.combo,e);var d=g.fn.combo.extensions.defaults={iconCls:null,autoShowPanel:true,nullable:true,onBeforeDestroy:function(){},onDestroy:function(){}};var a=g.fn.combo.extensions.methods={setIcon:function(q,p){return q.each(function(){b(this,p)})},setRequired:function(q,p){return q.each(function(){o(this,p)})},setPrompt:function(q,p){return q.each(function(){n(this,p)})},destroy:function(p){return p.each(function(){m(this)})},combo:function(p){return l(p[0])},setValues:function(q,p){return q.each(function(){j(this,p)})},clear:function(p){return p.each(function(){h(this)})}};g.extend(g.fn.combo.defaults,d);g.extend(g.fn.combo.methods,a);g.easyui.bindPageNestedFunc("mousedown","jdirkCombo","combo",function(s,r){var t=s.jQuery,q=t(r.target).closest("span.combo,div.combo-p");if(q.length){t(q).find(".combo-f").each(function(){var p=t(this).combo("panel");if(p.is(":visible")){p.panel("close")}});if(r.target&&r.target.ownerDocument==s.document){return}}t("body>div.combo-p>div.combo-panel:visible").panel("close")})})(jQuery);