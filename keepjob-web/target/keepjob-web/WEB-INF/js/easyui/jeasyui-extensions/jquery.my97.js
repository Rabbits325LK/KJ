(function(c,d){function b(j){var i=c.data(j,"my97"),h=i.options,g=c(j).addClass("my97-f").combo(c.extend({},h,{panelWidth:10,panelHeight:10,onShowPanel:function(){var l=g.combo("textbox"),k=c.extend({},h,{el:l[0],readOnly:h.readonly?true:false,onpicking:function(m){if(c.isFunction(h.onpicked)&&h.onpicked.apply(this,arguments)==false){return false}a(j,[m.cal.getNewDateStr()]);c.util.exec(function(){g.combo("hidePanel")})},oncleared:function(){g.combo("clear")}});WdatePicker.call(l[0],k);if(c.isFunction(h.onShowPanel)){h.onShowPanel.apply(this,arguments)}},onHidePanel:function(){if(i.dialog){var l=i.dialog,k=l.dialog("options");i.dialog=null;if(!k.closed){l.dialog("close")}}if(c.isFunction(h.onHidePanel)){h.onHidePanel.apply(this,arguments)}},onDestroy:function(){if(i.dialog){i.dialog.dialog("destroy");i.dialog=null}if(c.isFunction(h.onDestroy)){h.onDestroy.apply(this,arguments)}},onChange:function(l,k){if(c.isFunction(h.onChange)){h.onChange.apply(this,arguments)}}})),f=g.combo("textbox"),e=g.combo("panel");f.closest("span.combo").addClass("datebox");e.panel("body").addClass("combo-panel-noborder");h.originalValue=h.value;if(h.value){a(j,h.value)}g.combo("validate")}function a(h,e){var f=c(h),g=f.my97("options"),j=c.util.likeArrayNotString(e)?e:[e],i=j.join(g.separator);f.combo("setValues",j).combo("setText",i)}c.fn.my97=function(e,f){if(typeof e=="string"){var g=c.fn.my97.methods[e];if(g){return g(this,f)}else{return this.combo(e,f)}}e=e||{};return this.each(function(){var h=c.data(this,"my97");if(h){c.extend(h.options,e)}else{c.data(this,"my97",{options:c.extend({},c.fn.my97.defaults,c.fn.my97.parseOptions(this),e)});b(this)}})};c.fn.my97.parseOptions=function(e){return c.extend({},c.fn.combo.parseOptions(e),c.parser.parseOptions(e,["el","vel","weekMethod","lang","skin","dateFmt","realDateFmt","realTimeFmt","realFullFmt","minDate","maxDate","startDate",{doubleCalendar:"boolean",enableKeyboard:"boolean",enableInputMask:"boolean",autoUpdateOnChanged:"boolean",isShowWeek:"boolean",highLineWeekDay:"boolean",isShowClear:"boolean",isShowOK:"boolean",isShowToday:"boolean",isShowOthers:"boolean",autoPickDate:"boolean",qsEnabled:"boolean",autoShowQS:"boolean",opposite:"boolean"},{firstDayOfWeek:"number",errDealMode:"number"}]))};c.fn.my97.methods={options:function(g){var f=g.combo("options"),e=c.data(g[0],"my97").options;return c.extend(e,{originalValue:f.originalValue,disabled:f.disabled,readonly:f.readonly})},setValues:function(f,e){return f.each(function(){a(this,e)})},setValue:function(f,e){return f.each(function(){a(this,[e])})}};c.fn.my97.defaults=c.extend({},c.fn.combo.defaults,{dateFmt:"yyyy-MM-dd"});if(c.fn.datagrid){c.extend(c.fn.datagrid.defaults.editors,{my97:{init:function(e,f){var g=c('<input type="text"></input>').appendTo(e).my97(f);g.my97("textbox").addClass("datagrid-editable-input");return g},destroy:function(e){c(e).my97("destroy")},getValue:function(g){var e=c(g),f=e.my97("options");return e.my97(f.multiple?"getValues":"getValue")},setValue:function(h,g){var e=c(h),f=e.my97("options");if(g){if(f.multiple){if(c.util.likeArrayNotString(g)){e.my97("setValues",g)}else{if(typeof g=="string"){e.my97("setValues",g.split(f.separator))}else{e.my97("setValue",g)}}}else{e.my97("setValue",g)}}else{e.my97("clear")}},resize:function(f,e){c(f).my97("resize",e)},setFocus:function(e){c(e).my97("textbox").focus()}}})}c.parser.plugins.push("my97");if(c.fn.form&&c.isArray(c.fn.form.comboList)){c.fn.form.comboList.push("my97")}})(jQuery);